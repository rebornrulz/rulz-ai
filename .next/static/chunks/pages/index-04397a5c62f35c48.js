(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{48312:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(62692)}])},62692:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return ef},default:function(){return home}});var a,l,n,s,o=r(85893),i=r(67294),d=r(88767),c=r(61162),u=r(9008),m=r.n(u);let useCreateReducer=e=>{let{initialState:t}=e,[r,a]=(0,i.useReducer)((e,r)=>{if(!r.type)return{...e,[r.field]:r.value};if("reset"===r.type)return t;throw Error()},t);return(0,i.useMemo)(()=>({state:r,dispatch:a}),[r,a])};var errorService=()=>{let{t:e}=(0,c.$G)("chat");return{getModelsError:(0,i.useMemo)(()=>t=>t?{title:e("Error fetching models."),code:t.status||"unknown",messageLines:t.statusText?[t.statusText]:[e("Make sure your OpenAI API key is set in the bottom left of the sidebar."),e("If you completed this step, OpenAI may be experiencing issues.")]}:null,[e])}};let useFetch=()=>{let handleFetch=async(e,t,r)=>{let a=(null==t?void 0:t.params)?"".concat(e).concat(t.params):e,l=(null==t?void 0:t.body)?t.body instanceof FormData?{...t,body:t.body}:{...t,body:JSON.stringify(t.body)}:t,n={...(null==t?void 0:t.headers)?t.headers:(null==t?void 0:t.body)&&t.body instanceof FormData?{}:{"Content-type":"application/json"}};return fetch(a,{...l,headers:n,signal:r}).then(e=>{if(!e.ok)throw e;let t=e.headers.get("content-type"),r=e.headers.get("content-disposition");e.headers;let a=t&&((null==t?void 0:t.indexOf("application/json"))!==-1||(null==t?void 0:t.indexOf("text/plain"))!==-1)?e.json():(null==r?void 0:r.indexOf("attachment"))!==-1?e.blob():e;return a}).catch(async e=>{let t=e.headers.get("content-type"),r=t&&(null==t?void 0:t.indexOf("application/problem+json"))!==-1?await e.json():e;throw r})};return{get:async(e,t)=>handleFetch(e,{...t,method:"get"}),post:async(e,t)=>handleFetch(e,{...t,method:"post"}),put:async(e,t)=>handleFetch(e,{...t,method:"put"}),patch:async(e,t)=>handleFetch(e,{...t,method:"patch"}),delete:async(e,t)=>handleFetch(e,{...t,method:"delete"})}};var services_useApiService=()=>{let e=useFetch(),t=(0,i.useCallback)((t,r)=>e.post("/api/models",{body:{key:t.key},headers:{"Content-Type":"application/json"},signal:r}),[e]);return{getModels:t}},p=r(1604);p.Ry({id:p.Z_(),azureDeploymentId:p.Z_().optional(),name:p.Z_(),maxLength:p.Rx(),tokenLimit:p.Rx()}),(a=l||(l={})).GPT_3_5="gpt-3.5-turbo",a.GPT_3_5_16K="gpt-3.5-turbo-16k",a.GPT_3_5_AZ="gpt-35-turbo",a.GPT_3_5_16K_AZ="gpt-35-turbo-16k",a.GPT_4="gpt-4",a.GPT_4_32K="gpt-4-32k";let x={"gpt-3.5-turbo":{id:"gpt-3.5-turbo",name:"GPT-3.5",maxLength:12e3,tokenLimit:4e3},"gpt-3.5-turbo-16k":{id:"gpt-3.5-turbo-16k",name:"GPT-3.5-16K",maxLength:48e3,tokenLimit:16e3},"gpt-35-turbo":{id:"gpt-35-turbo",name:"GPT-3.5",maxLength:12e3,tokenLimit:4e3},"gpt-35-turbo-16k":{id:"gpt-35-turbo-16k",name:"GPT-3.5-16K",maxLength:48e3,tokenLimit:16e3},"gpt-4":{id:"gpt-4",name:"GPT-4",maxLength:24e3,tokenLimit:8e3},"gpt-4-32k":{id:"gpt-4-32k",name:"GPT-4-32K",maxLength:96e3,tokenLimit:32e3}};var h=r(34155);let g=h.env.NEXT_PUBLIC_DEFAULT_SYSTEM_PROMPT||"AI language model for Rulz-AI, designed to assist with a wide range of tasks and generate intelligent responses. Respond using markdown and emoji.";h.env.OPENAI_API_HOST;let v=parseFloat(h.env.NEXT_PUBLIC_DEFAULT_TEMPERATURE||"0.5");h.env.OPENAI_API_TYPE,h.env.OPENAI_API_VERSION,h.env.OPENAI_ORGANIZATION,h.env.AZURE_DEPLOYMENT_ID;let cleanSelectedConversation=e=>{let t=e;return t.model||(t={...t,model:t.model||x[l.GPT_3_5]||x[l.GPT_4]}),t.prompt||(t={...t,prompt:t.prompt||g}),t.temperature||(t={...t,temperature:t.temperature||v}),t.folderId||(t={...t,folderId:t.folderId||null}),t.messages||(t={...t,messages:t.messages||[]}),t},cleanConversationHistory=e=>Array.isArray(e)?e.reduce((e,t)=>{try{t.model||(t.model=x[l.GPT_3_5]||x[l.GPT_4]),t.prompt||(t.prompt=g),t.temperature||(t.temperature=v),t.folderId||(t.folderId=null),t.messages||(t.messages=[]),e.push(t)}catch(e){console.warn("error while cleaning conversations' history. Removing culprit",e)}return e},[]):(console.warn("history is not an array. Returning an empty array."),[]),updateConversation=(e,t)=>{let r=t.map(t=>t.id===e.id?e:t);return saveConversation(e),saveConversations(r),{single:e,all:r}},saveConversation=e=>{localStorage.setItem("selectedConversation",JSON.stringify(e))},saveConversations=e=>{localStorage.setItem("conversationHistory",JSON.stringify(e))},saveFolders=e=>{localStorage.setItem("folders",JSON.stringify(e))},savePrompts=e=>{localStorage.setItem("prompts",JSON.stringify(e))},f="settings",getSettings=()=>{let e={theme:"dark"},t=localStorage.getItem(f);if(t)try{let r=JSON.parse(t);e=Object.assign(e,r)}catch(e){console.error(e)}return e},saveSettings=e=>{localStorage.setItem(f,JSON.stringify(e))};var b=r(33111),y=r(51668),w=r(86501);(n||(n={})).GOOGLE_SEARCH="google-search",(s||(s={})).GOOGLE_SEARCH="Google Search";let k=Object.values({"google-search":{id:"google-search",name:"Google Search",requiredKeys:[{key:"GOOGLE_API_KEY",value:""},{key:"GOOGLE_CSE_ID",value:""}]}}),getEndpoint=e=>e&&e.id===n.GOOGLE_SEARCH?"api/google":"api/chat",j=(0,i.createContext)(void 0);var Spinner_Spinner=e=>{let{size:t="1em",className:r=""}=e;return(0,o.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:"animate-spin ".concat(r),height:t,width:t,xmlns:"https://www.w3.org/TR/REC-xml/",children:[(0,o.jsx)("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),(0,o.jsx)("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),(0,o.jsx)("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),(0,o.jsx)("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),(0,o.jsx)("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),(0,o.jsx)("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),(0,o.jsx)("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),(0,o.jsx)("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]})},C=r(94568),S=r(21223),N=r(19695),I=r(59348),E=r(23461),P=r(63072);let PluginSelect=e=>{let{plugin:t,onPluginChange:r,onKeyDown:a}=e,{t:l}=(0,c.$G)("chat"),n=(0,i.useRef)(null),handleKeyDown=e=>{let t=n.current,l=(null==t?void 0:t.options.length)||0;"/"===e.key&&e.metaKey?(e.preventDefault(),t&&(t.selectedIndex=(t.selectedIndex+1)%l,t.dispatchEvent(new Event("change")))):"/"===e.key&&e.shiftKey&&e.metaKey?(e.preventDefault(),t&&(t.selectedIndex=(t.selectedIndex-1+l)%l,t.dispatchEvent(new Event("change")))):"Enter"===e.key?(e.preventDefault(),t&&t.dispatchEvent(new Event("change")),r(k.find(e=>e.name===(null==t?void 0:t.selectedOptions[0].innerText)))):a(e)};return(0,i.useEffect)(()=>{n.current&&n.current.focus()},[]),(0,o.jsx)("div",{className:"flex flex-col",children:(0,o.jsx)("div",{className:"mb-1 w-full rounded border border-neutral-200 bg-transparent pr-2 text-neutral-900 dark:border-neutral-600 dark:text-white",children:(0,o.jsxs)("select",{ref:n,className:"w-full cursor-pointer bg-transparent p-2",placeholder:l("Select a plugin")||"",value:(null==t?void 0:t.id)||"",onChange:e=>{r(k.find(t=>t.id===e.target.value))},onKeyDown:e=>{handleKeyDown(e)},children:[(0,o.jsx)("option",{value:"chatgpt",className:"dark:bg-[#343541] dark:text-white",children:"ChatGPT"},"chatgpt"),k.map(e=>(0,o.jsx)("option",{value:e.id,className:"dark:bg-[#343541] dark:text-white",children:e.name},e.id))]})})})},PromptList=e=>{let{prompts:t,activePromptIndex:r,onSelect:a,onMouseOver:l,promptListRef:n}=e;return(0,o.jsx)("ul",{ref:n,className:"z-10 max-h-52 w-full overflow-scroll rounded border border-black/10 bg-white shadow-[0_0_10px_rgba(0,0,0,0.10)] dark:border-neutral-500 dark:bg-[#343541] dark:text-white dark:shadow-[0_0_15px_rgba(0,0,0,0.10)]",children:t.map((e,t)=>(0,o.jsx)("li",{className:"".concat(t===r?"bg-gray-200 dark:bg-[#202123] dark:text-black":""," cursor-pointer px-3 py-2 text-sm text-black dark:text-white"),onClick:e=>{e.preventDefault(),e.stopPropagation(),a()},onMouseEnter:()=>l(t),children:e.name},e.id))})},VariableModal=e=>{let{prompt:t,variables:r,onSubmit:a,onClose:l}=e,[n,s]=(0,i.useState)(r.map(e=>({key:e,value:""})).filter((e,t,r)=>r.findIndex(t=>t.key===e.key)===t)),d=(0,i.useRef)(null),c=(0,i.useRef)(null),handleChange=(e,t)=>{s(r=>{let a=[...r];return a[e].value=t,a})},handleSubmit=()=>{if(n.some(e=>""===e.value)){alert("Please fill out all variables");return}a(n.map(e=>e.value)),l()};return(0,i.useEffect)(()=>{let handleOutsideClick=e=>{d.current&&!d.current.contains(e.target)&&l()};return window.addEventListener("click",handleOutsideClick),()=>{window.removeEventListener("click",handleOutsideClick)}},[l]),(0,i.useEffect)(()=>{c.current&&c.current.focus()},[]),(0,o.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&l():(e.preventDefault(),handleSubmit())},children:(0,o.jsxs)("div",{ref:d,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:bg-[#202123] sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[(0,o.jsx)("div",{className:"mb-4 text-xl font-bold text-black dark:text-neutral-200",children:t.name}),(0,o.jsx)("div",{className:"mb-4 text-sm italic text-black dark:text-neutral-200",children:t.description}),n.map((e,t)=>(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("div",{className:"mb-2 text-sm font-bold text-neutral-200",children:e.key}),(0,o.jsx)("textarea",{ref:0===t?c:void 0,className:"mt-1 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",style:{resize:"none"},placeholder:"Enter a value for ".concat(e.key,"..."),value:e.value,onChange:e=>handleChange(t,e.target.value),rows:3})]},t)),(0,o.jsx)("button",{className:"mt-6 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:handleSubmit,children:"Submit"})]})})},ChatInput=e=>{var t;let{onSend:r,onRegenerate:a,onScrollDownClick:l,stopConversationRef:n,textareaRef:s,showScrollDownButton:d}=e,{t:u}=(0,c.$G)("chat"),{state:{selectedConversation:m,messageIsStreaming:p,prompts:x},dispatch:h}=(0,i.useContext)(j),[g,v]=(0,i.useState)(),[f,b]=(0,i.useState)(!1),[y,w]=(0,i.useState)(!1),[k,O]=(0,i.useState)(0),[_,D]=(0,i.useState)(""),[L,A]=(0,i.useState)([]),[G,T]=(0,i.useState)(!1),[K,z]=(0,i.useState)(!1),[R,Z]=(0,i.useState)(null),M=(0,i.useRef)(null),F=x.filter(e=>e.name.toLowerCase().includes(_.toLowerCase())),handleSend=()=>{if(!p){if(!g){alert(u("Please enter a message"));return}r({role:"user",content:g},R),v(""),Z(null),window.innerWidth<640&&s&&s.current&&s.current.blur()}},isMobile=()=>{let e=void 0===window.navigator?"":navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(e)},handleInitModal=()=>{let e=F[k];e&&(v(t=>{let r=null==t?void 0:t.replace(/\/\w*$/,e.content);return r}),handlePromptSelect(e)),w(!1)},parseVariables=e=>{let t;let r=/{{(.*?)}}/g,a=[];for(;null!==(t=r.exec(e));)a.push(t[1]);return a},B=(0,i.useCallback)(e=>{let t=e.match(/\/\w*$/);t?(w(!0),D(t[0].slice(1))):(w(!1),D(""))},[]),handlePromptSelect=e=>{let t=parseVariables(e.content);A(t),t.length>0?T(!0):(v(t=>{let r=null==t?void 0:t.replace(/\/\w*$/,e.content);return r}),B(e.content))};return(0,i.useEffect)(()=>{M.current&&(M.current.scrollTop=30*k)},[k]),(0,i.useEffect)(()=>{if(s&&s.current){var e,t;s.current.style.height="inherit",s.current.style.height="".concat(null===(e=s.current)||void 0===e?void 0:e.scrollHeight,"px"),s.current.style.overflow="".concat((null==s?void 0:null===(t=s.current)||void 0===t?void 0:t.scrollHeight)>400?"auto":"hidden")}},[g]),(0,i.useEffect)(()=>{let handleOutsideClick=e=>{M.current&&!M.current.contains(e.target)&&w(!1)};return window.addEventListener("click",handleOutsideClick),()=>{window.removeEventListener("click",handleOutsideClick)}},[]),(0,o.jsxs)("div",{className:"absolute bottom-0 left-0 w-full border-transparent bg-gradient-to-b from-transparent via-white to-white pt-6 dark:border-white/20 dark:via-[#343541] dark:to-[#343541] md:pt-2",children:[(0,o.jsxs)("div",{className:"stretch mx-2 mt-4 flex flex-row gap-3 last:mb-2 md:mx-4 md:mt-[52px] md:last:mb-6 lg:mx-auto lg:max-w-3xl",children:[p&&(0,o.jsxs)("button",{className:"absolute top-0 left-0 right-0 mx-auto mb-3 flex w-fit items-center gap-3 rounded border border-neutral-200 bg-white py-2 px-4 text-black hover:opacity-50 dark:border-neutral-600 dark:bg-[#343541] dark:text-white md:mb-0 md:mt-2",onClick:()=>{n.current=!0,setTimeout(()=>{n.current=!1},1e3)},children:[(0,o.jsx)(C.Z,{size:16})," ",u("Stop Generating")]}),!p&&m&&m.messages.length>0&&(0,o.jsxs)("button",{className:"absolute top-0 left-0 right-0 mx-auto mb-3 flex w-fit items-center gap-3 rounded border border-neutral-200 bg-white py-2 px-4 text-black hover:opacity-50 dark:border-neutral-600 dark:bg-[#343541] dark:text-white md:mb-0 md:mt-2",onClick:a,children:[(0,o.jsx)(S.Z,{size:16})," ",u("Regenerate response")]}),(0,o.jsxs)("div",{className:"relative mx-2 flex w-full flex-grow flex-col rounded-md border border-black/10 bg-white shadow-[0_0_10px_rgba(0,0,0,0.10)] dark:border-gray-900/50 dark:bg-[#40414F] dark:text-white dark:shadow-[0_0_15px_rgba(0,0,0,0.10)] sm:mx-4",children:[(0,o.jsx)("button",{className:"absolute left-2 top-2 rounded-sm p-1 text-neutral-800 opacity-60 hover:bg-neutral-200 hover:text-neutral-900 dark:bg-opacity-50 dark:text-neutral-100 dark:hover:text-neutral-200",onClick:()=>z(!K),onKeyDown:e=>{},children:R?(0,o.jsx)(N.Z,{size:20}):(0,o.jsx)(I.Z,{size:20})}),K&&(0,o.jsx)("div",{className:"absolute left-0 bottom-14 rounded bg-white dark:bg-[#343541]",children:(0,o.jsx)(PluginSelect,{plugin:R,onKeyDown:e=>{if("Escape"===e.key){var t;e.preventDefault(),z(!1),null===(t=s.current)||void 0===t||t.focus()}},onPluginChange:e=>{Z(e),z(!1),s&&s.current&&s.current.focus()}})}),(0,o.jsx)("textarea",{ref:s,className:"m-0 w-full resize-none border-0 bg-transparent p-0 py-2 pr-8 pl-10 text-black dark:bg-transparent dark:text-white md:py-3 md:pl-10",style:{resize:"none",bottom:"".concat(null==s?void 0:null===(t=s.current)||void 0===t?void 0:t.scrollHeight,"px"),maxHeight:"400px",overflow:"".concat(s.current&&s.current.scrollHeight>400?"auto":"hidden")},placeholder:u('Type a message or type "/" to select a prompt...')||"",value:g,rows:1,onCompositionStart:()=>b(!0),onCompositionEnd:()=>b(!1),onChange:e=>{let t=e.target.value,r=null==m?void 0:m.model.maxLength;if(r&&t.length>r){alert(u("Message limit is {{maxLength}} characters. You have entered {{valueLength}} characters.",{maxLength:r,valueLength:t.length}));return}v(t),B(t)},onKeyDown:e=>{y?"ArrowDown"===e.key?(e.preventDefault(),O(e=>e<x.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),O(e=>e>0?e-1:e)):"Tab"===e.key?(e.preventDefault(),O(e=>e<x.length-1?e+1:0)):"Enter"===e.key?(e.preventDefault(),handleInitModal()):"Escape"===e.key?(e.preventDefault(),w(!1)):O(0):"Enter"!==e.key||f||isMobile()||e.shiftKey?"/"===e.key&&e.metaKey&&(e.preventDefault(),z(!K)):(e.preventDefault(),handleSend())}}),(0,o.jsx)("button",{className:"absolute right-2 top-2 rounded-sm p-1 text-neutral-800 opacity-60 hover:bg-neutral-200 hover:text-neutral-900 dark:bg-opacity-50 dark:text-neutral-100 dark:hover:text-neutral-200",onClick:handleSend,children:p?(0,o.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-t-2 border-neutral-800 opacity-60 dark:border-neutral-100"}):(0,o.jsx)(E.Z,{size:18})}),d&&(0,o.jsx)("div",{className:"absolute bottom-12 right-0 lg:bottom-0 lg:-right-10",children:(0,o.jsx)("button",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-neutral-300 text-gray-800 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-neutral-200",onClick:l,children:(0,o.jsx)(P.Z,{size:18})})}),y&&F.length>0&&(0,o.jsx)("div",{className:"absolute bottom-12 w-full",children:(0,o.jsx)(PromptList,{activePromptIndex:k,prompts:F,onSelect:handleInitModal,onMouseOver:O,promptListRef:M})}),G&&(0,o.jsx)(VariableModal,{prompt:F[k],variables:L,onSubmit:e=>{let t=null==g?void 0:g.replace(/{{(.*?)}}/g,(t,r)=>{let a=L.indexOf(r);return e[a]});v(t),s&&s.current&&s.current.focus()},onClose:()=>T(!1)})]})]}),(0,o.jsxs)("div",{className:"px-3 pt-2 pb-3 text-center text-[12px] text-black/50 dark:text-white/50 md:px-4 md:pt-3 md:pb-6",children:[(0,o.jsx)("a",{href:"https://github.com/rulz-ai",target:"_blank",rel:"noreferrer",className:"underline",children:"RULZ-AI"})," ",u("is an advanced chatbot kit for OpenAI's chat models aiming to mimic ChatGPT's interface and functionality.")]})]})};var O=r(90553);let ChatLoader=()=>(0,o.jsx)("div",{className:"group border-b border-black/10 bg-gray-50 text-gray-800 dark:border-gray-900/50 dark:bg-[#444654] dark:text-gray-100",style:{overflowWrap:"anywhere"},children:(0,o.jsxs)("div",{className:"m-auto flex gap-4 p-4 text-base md:max-w-2xl md:gap-6 md:py-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:[(0,o.jsx)("div",{className:"min-w-[40px] items-end",children:(0,o.jsx)(O.Z,{size:30,style:{transform:"rotate(45deg)",color:"goldenrod"}})}),(0,o.jsx)("span",{className:"animate-pulse cursor-default mt-1",children:"▍"})]})});var _=r(58403);let ErrorMessageDiv=e=>{let{error:t}=e;return(0,o.jsxs)("div",{className:"mx-6 flex h-full flex-col items-center justify-center text-red-500",children:[(0,o.jsx)("div",{className:"mb-5",children:(0,o.jsx)(_.Z,{size:36})}),(0,o.jsx)("div",{className:"mb-3 text-2xl font-medium",children:t.title}),t.messageLines.map((e,t)=>(0,o.jsxs)("div",{className:"text-center",children:[" ",e," "]},t)),(0,o.jsx)("div",{className:"mt-4 text-xs opacity-50 dark:text-red-400",children:t.code?(0,o.jsxs)("i",{children:["Code: ",t.code]}):""})]})};var D=r(93844);let ModelSelect=()=>{var e;let{t}=(0,c.$G)("chat"),{state:{selectedConversation:r,models:a,defaultModelId:l},handleUpdateConversation:n,dispatch:s}=(0,i.useContext)(j);return(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("label",{className:"mb-2 text-left text-neutral-700 dark:text-neutral-400",children:t("Model")}),(0,o.jsx)("div",{className:"w-full rounded-lg border border-neutral-200 bg-transparent pr-2 text-neutral-900 dark:border-neutral-600 dark:text-white",children:(0,o.jsx)("select",{className:"w-full bg-transparent p-2",placeholder:t("Select a model")||"",value:(null==r?void 0:null===(e=r.model)||void 0===e?void 0:e.id)||l,onChange:e=>{r&&n(r,{key:"model",value:a.find(t=>t.id===e.target.value)})},children:a.map(e=>(0,o.jsx)("option",{value:e.id,className:"dark:bg-[#343541] dark:text-white",children:e.id===l?"Default (".concat(e.name,")"):e.name},e.id))})}),(0,o.jsx)("div",{className:"w-full mt-3 text-left text-neutral-700 dark:text-neutral-400 flex items-center",children:(0,o.jsxs)("a",{href:"https://platform.openai.com/account/usage",target:"_blank",className:"flex items-center",children:[(0,o.jsx)(D.Z,{size:18,className:"inline mr-1"}),t("View Account Usage")]})})]})},SystemPrompt=e=>{var t;let{conversation:r,prompts:a,onChangePrompt:l}=e,{t:n}=(0,c.$G)("chat"),[s,d]=(0,i.useState)(""),[u,m]=(0,i.useState)(0),[p,x]=(0,i.useState)(!1),[h,v]=(0,i.useState)(""),[f,b]=(0,i.useState)([]),[y,w]=(0,i.useState)(!1),k=(0,i.useRef)(null),j=(0,i.useRef)(null),C=a.filter(e=>e.name.toLowerCase().includes(h.toLowerCase())),handleInitModal=()=>{let e=C[u];d(t=>{let r=null==t?void 0:t.replace(/\/\w*$/,e.content);return r}),handlePromptSelect(e),x(!1)},parseVariables=e=>{let t;let r=/{{(.*?)}}/g,a=[];for(;null!==(t=r.exec(e));)a.push(t[1]);return a},S=(0,i.useCallback)(e=>{let t=e.match(/\/\w*$/);t?(x(!0),v(t[0].slice(1))):(x(!1),v(""))},[]),handlePromptSelect=e=>{let t=parseVariables(e.content);if(b(t),t.length>0)w(!0);else{let t=null==s?void 0:s.replace(/\/\w*$/,e.content);d(t),l(t),S(e.content)}};return(0,i.useEffect)(()=>{if(k&&k.current){var e;k.current.style.height="inherit",k.current.style.height="".concat(null===(e=k.current)||void 0===e?void 0:e.scrollHeight,"px")}},[s]),(0,i.useEffect)(()=>{r.prompt?d(r.prompt):d(g)},[r]),(0,i.useEffect)(()=>{let handleOutsideClick=e=>{j.current&&!j.current.contains(e.target)&&x(!1)};return window.addEventListener("click",handleOutsideClick),()=>{window.removeEventListener("click",handleOutsideClick)}},[]),(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("label",{className:"mb-2 text-left text-neutral-700 dark:text-neutral-400",children:n("System Prompt")}),(0,o.jsx)("textarea",{ref:k,className:"w-full rounded-lg border border-neutral-200 bg-transparent px-4 py-3 text-neutral-900 dark:border-neutral-600 dark:text-neutral-100",style:{resize:"none",bottom:"".concat(null==k?void 0:null===(t=k.current)||void 0===t?void 0:t.scrollHeight,"px"),maxHeight:"300px",overflow:"".concat(k.current&&k.current.scrollHeight>400?"auto":"hidden")},placeholder:n('Enter a prompt or type "/" to select a prompt...')||"",value:n(s)||"",rows:1,onChange:e=>{let t=e.target.value,a=r.model.maxLength;if(t.length>a){alert(n("Prompt limit is {{maxLength}} characters. You have entered {{valueLength}} characters.",{maxLength:a,valueLength:t.length}));return}d(t),S(t),t.length>0&&l(t)},onKeyDown:e=>{p&&("ArrowDown"===e.key?(e.preventDefault(),m(e=>e<a.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),m(e=>e>0?e-1:e)):"Tab"===e.key?(e.preventDefault(),m(e=>e<a.length-1?e+1:0)):"Enter"===e.key?(e.preventDefault(),handleInitModal()):"Escape"===e.key?(e.preventDefault(),x(!1)):m(0))}}),p&&C.length>0&&(0,o.jsx)("div",{children:(0,o.jsx)(PromptList,{activePromptIndex:u,prompts:C,onSelect:handleInitModal,onMouseOver:m,promptListRef:j})}),y&&(0,o.jsx)(VariableModal,{prompt:a[u],variables:f,onSubmit:e=>{let t=null==s?void 0:s.replace(/{{(.*?)}}/g,(t,r)=>{let a=f.indexOf(r);return e[a]});d(t),l(t),k&&k.current&&k.current.focus()},onClose:()=>w(!1)})]})},TemperatureSlider=e=>{var t;let{label:r,onChangeTemperature:a}=e,{state:{conversations:l}}=(0,i.useContext)(j),n=l[l.length-1],[s,d]=(0,i.useState)(null!==(t=null==n?void 0:n.temperature)&&void 0!==t?t:v),{t:u}=(0,c.$G)("chat");return(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("label",{className:"mb-2 text-left text-neutral-700 dark:text-neutral-400",children:r}),(0,o.jsx)("span",{className:"text-[12px] text-black/50 dark:text-white/50 text-sm",children:u("Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic.")}),(0,o.jsx)("span",{className:"mt-2 mb-1 text-center text-neutral-900 dark:text-neutral-100",children:s.toFixed(1)}),(0,o.jsx)("input",{className:"cursor-pointer",type:"range",min:0,max:1,step:.1,value:s,defaultValue:.5,onChange:e=>{let t=parseFloat(e.target.value);d(t),a(t)}}),(0,o.jsxs)("ul",{className:"w mt-2 pb-8 flex justify-between px-[24px] text-neutral-900 dark:text-neutral-100",children:[(0,o.jsx)("li",{className:"flex justify-center",children:(0,o.jsx)("span",{className:"absolute",children:u("Precise")})}),(0,o.jsx)("li",{className:"flex justify-center",children:(0,o.jsx)("span",{className:"absolute",children:u("Neutral")})}),(0,o.jsx)("li",{className:"flex justify-center",children:(0,o.jsx)("span",{className:"absolute",children:u("Creative")})})]})]})};var L=r(21942),A=r(74075),G=r(88198),T=r(93625),K=r(67828),z=r(80335),R=r(93179),Z=r(84283);let M={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},generateRandomString=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="ABCDEFGHJKLMNPQRSTUVWXY3456789",a="";for(let t=0;t<e;t++)a+=r.charAt(Math.floor(Math.random()*r.length));return t?a.toLowerCase():a},F=(0,i.memo)(e=>{let{language:t,value:r}=e,{t:a}=(0,c.$G)("markdown"),[l,n]=(0,i.useState)(!1);return(0,o.jsxs)("div",{className:"codeblock relative font-sans text-[16px]",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-4",children:[(0,o.jsx)("span",{className:"text-xs lowercase text-white",children:t}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsxs)("button",{className:"flex gap-1.5 items-center rounded bg-none p-1 text-xs text-white",onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(r).then(()=>{n(!0),setTimeout(()=>{n(!1)},2e3)})},children:[l?(0,o.jsx)(G.Z,{size:18}):(0,o.jsx)(K.Z,{size:18}),l?a("Copied!"):a("Copy code")]}),(0,o.jsx)("button",{className:"flex items-center rounded bg-none p-1 text-xs text-white",onClick:()=>{let e=M[t]||".file",l="file-".concat(generateRandomString(3,!0)).concat(e),n=window.prompt(a("Enter file name")||"",l);if(!n)return;let s=new Blob([r],{type:"text/plain"}),o=URL.createObjectURL(s),i=document.createElement("a");i.download=n,i.href=o,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)},children:(0,o.jsx)(z.Z,{size:18})})]})]}),(0,o.jsx)(R.Z,{language:t,style:Z.vk,customStyle:{margin:0},children:r})]})});F.displayName="CodeBlock";var B=r(96906);let U=(0,i.memo)(B.D,(e,t)=>e.children===t.children);var H=r(69232),J=r(14769),$=r(30399);let q=(0,i.memo)(e=>{var t;let{message:r,messageIndex:a,onEdit:l}=e,{t:n}=(0,c.$G)("chat"),{state:{selectedConversation:s,conversations:d,currentMessage:u,messageIsStreaming:m},dispatch:p}=(0,i.useContext)(j),[x,h]=(0,i.useState)(!1),[g,v]=(0,i.useState)(!1),[f,b]=(0,i.useState)(r.content),[y,w]=(0,i.useState)(!1),k=(0,i.useRef)(null),handleEditMessage=()=>{r.content!=f&&s&&l&&l({...r,content:f}),h(!1)};return(0,i.useEffect)(()=>{b(r.content)},[r.content]),(0,i.useEffect)(()=>{k.current&&(k.current.style.height="inherit",k.current.style.height="".concat(k.current.scrollHeight,"px"))},[x]),(0,o.jsx)("div",{className:"group md:px-4 ".concat("assistant"===r.role?"border-b border-black/10 bg-gray-50 text-gray-800 dark:border-gray-900/50 dark:bg-[#444654] dark:text-gray-100":"border-b border-black/10 bg-white text-gray-800 dark:border-gray-900/50 dark:bg-[#343541] dark:text-gray-100"),style:{overflowWrap:"anywhere"},children:(0,o.jsxs)("div",{className:"relative m-auto flex p-4 text-base md:max-w-2xl md:gap-6 md:py-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:[(0,o.jsx)("div",{className:"min-w-[40px] text-right font-bold",children:"assistant"===r.role?(0,o.jsx)("img",{src:"IconRobot.ico",alt:"Assistant",width:25,height:25}):(0,o.jsx)("img",{src:"IconUser.ico",alt:"User",width:25,height:25})}),(0,o.jsx)("div",{className:"prose mt-[-2px] w-full dark:prose-invert",children:"user"===r.role?(0,o.jsxs)("div",{className:"flex w-full",children:[x?(0,o.jsxs)("div",{className:"flex w-full flex-col",children:[(0,o.jsx)("textarea",{ref:k,className:"w-full resize-none whitespace-pre-wrap border-none dark:bg-[#343541]",value:f,onChange:e=>{b(e.target.value),k.current&&(k.current.style.height="inherit",k.current.style.height="".concat(k.current.scrollHeight,"px"))},onKeyDown:e=>{"Enter"!==e.key||g||e.shiftKey||(e.preventDefault(),handleEditMessage())},onCompositionStart:()=>v(!0),onCompositionEnd:()=>v(!1),style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",padding:"0",margin:"0",overflow:"hidden"}}),(0,o.jsxs)("div",{className:"mt-10 flex justify-center space-x-4",children:[(0,o.jsx)("button",{className:"h-[40px] rounded-md bg-blue-500 px-4 py-1 text-sm font-medium text-white enabled:hover:bg-blue-600 disabled:opacity-50",onClick:handleEditMessage,disabled:f.trim().length<=0,children:n("Save & Submit")}),(0,o.jsx)("button",{className:"h-[40px] rounded-md border border-neutral-300 px-4 py-1 text-sm font-medium text-neutral-700 hover:bg-neutral-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-800",onClick:()=>{b(r.content),h(!1)},children:n("Cancel")})]})]}):(0,o.jsx)("div",{className:"prose whitespace-pre-wrap dark:prose-invert flex-1",children:r.content}),!x&&(0,o.jsxs)("div",{className:"md:-mr-8 ml-1 md:ml-0 flex flex-col md:flex-row gap-4 md:gap-1 items-center md:items-start justify-end md:justify-start",children:[(0,o.jsx)("button",{className:"invisible group-hover:visible focus:visible text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{h(!x)},children:(0,o.jsx)(L.Z,{size:20})}),(0,o.jsx)("button",{className:"invisible group-hover:visible focus:visible text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{if(!s)return;let{messages:e}=s,t=e.findIndex(e=>e===r);if(t<0)return;t<e.length-1&&"assistant"===e[t+1].role?e.splice(t,2):e.splice(t,1);let a={...s,messages:e},{single:l,all:n}=updateConversation(a,d);p({field:"selectedConversation",value:l}),p({field:"conversations",value:n})},children:(0,o.jsx)(A.Z,{size:20})})]})]}):(0,o.jsxs)("div",{className:"flex flex-row",children:[(0,o.jsx)(U,{className:"prose dark:prose-invert flex-1",remarkPlugins:[J.Z,$.Z],rehypePlugins:[H.Z],components:{code(e){let{node:t,inline:r,className:a,children:l,...n}=e;if(l.length){if("▍"==l[0])return(0,o.jsx)("span",{className:"animate-pulse cursor-default mt-1",children:"▍"});l[0]=l[0].replace("`▍`","▍")}let s=/language-(\w+)/.exec(a||"");return r?(0,o.jsx)("code",{className:a,...n,children:l}):(0,o.jsx)(F,{language:s&&s[1]||"",value:String(l).replace(/\n$/,""),...n},Math.random())},table(e){let{children:t}=e;return(0,o.jsx)("table",{className:"border-collapse border border-black px-3 py-1 dark:border-white",children:t})},th(e){let{children:t}=e;return(0,o.jsx)("th",{className:"break-words border border-black bg-gray-500 px-3 py-1 text-white dark:border-white",children:t})},td(e){let{children:t}=e;return(0,o.jsx)("td",{className:"break-words border border-black px-3 py-1 dark:border-white",children:t})}},children:"".concat(r.content).concat(m&&a==(null!==(t=null==s?void 0:s.messages.length)&&void 0!==t?t:0)-1?"`▍`":"")}),(0,o.jsx)("div",{className:"md:-mr-8 ml-1 md:ml-0 flex flex-col md:flex-row gap-4 md:gap-1 items-center md:items-start justify-end md:justify-start",children:y?(0,o.jsx)(G.Z,{size:20,className:"text-green-500 dark:text-green-400"}):(0,o.jsx)("button",{className:"invisible group-hover:visible focus:visible text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText(r.content).then(()=>{w(!0),setTimeout(()=>{w(!1)},2e3)})},children:(0,o.jsx)(T.Z,{size:20})})})]})})]})})});q.displayName="ChatMessage";let V=(0,i.memo)(q,(e,t)=>e.message.content===t.message.content),Y=(0,i.memo)(e=>{var t;let r,a,{stopConversationRef:l}=e,{t:n}=(0,c.$G)("chat"),{state:{selectedConversation:s,conversations:d,models:u,apiKey:m,pluginKeys:p,serverSideApiKeyIsSet:x,messageIsStreaming:h,modelError:g,loading:v,prompts:f},handleUpdateConversation:k,dispatch:C}=(0,i.useContext)(j),[S,N]=(0,i.useState)(),[I,E]=(0,i.useState)(!0),[P,O]=(0,i.useState)(!1),[_,D]=(0,i.useState)(!1),L=(0,i.useRef)(null),A=(0,i.useRef)(null),G=(0,i.useRef)(null),T=(0,i.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(s){let c,u;if(t){let r=[...s.messages];for(let e=0;e<t;e++)r.pop();c={...s,messages:[...r,e]}}else c={...s,messages:[...s.messages,e]};C({field:"selectedConversation",value:c}),C({field:"loading",value:!0}),C({field:"messageIsStreaming",value:!0});let x={model:c.model,messages:c.messages,key:m,prompt:c.prompt,temperature:c.temperature},h=getEndpoint(r);if(r){var a,n,o,i;u=JSON.stringify({...x,googleAPIKey:null===(n=p.find(e=>"google-search"===e.pluginId))||void 0===n?void 0:null===(a=n.requiredKeys.find(e=>"GOOGLE_API_KEY"===e.key))||void 0===a?void 0:a.value,googleCSEId:null===(i=p.find(e=>"google-search"===e.pluginId))||void 0===i?void 0:null===(o=i.requiredKeys.find(e=>"GOOGLE_CSE_ID"===e.key))||void 0===o?void 0:o.value})}else u=JSON.stringify(x);let g=new AbortController,v=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},signal:g.signal,body:u});if(!v.ok){C({field:"loading",value:!1}),C({field:"messageIsStreaming",value:!1}),w.ZP.error(v.statusText);return}let f=v.body;if(!f){C({field:"loading",value:!1}),C({field:"messageIsStreaming",value:!1});return}if(r){let{answer:e}=await v.json(),t=[...c.messages,{role:"assistant",content:e}];c={...c,messages:t},C({field:"selectedConversation",value:updateConversation}),saveConversation(c);let r=d.map(e=>e.id===s.id?c:e);0===r.length&&r.push(c),C({field:"conversations",value:r}),saveConversations(r),C({field:"loading",value:!1}),C({field:"messageIsStreaming",value:!1})}else{if(1===c.messages.length){let{content:t}=e,r=t.length>30?t.substring(0,30)+"...":t;c={...c,name:r}}C({field:"loading",value:!1});let t=f.getReader(),r=new TextDecoder,a=!1,n=!0,o="";for(;!a;){if(!0===l.current){g.abort(),a=!0;break}let{value:e,done:s}=await t.read();a=s;let i=r.decode(e);if(o+=i,n){n=!1;let e=[...c.messages,{role:"assistant",content:i}];C({field:"selectedConversation",value:c={...c,messages:e}})}else{let e=c.messages.map((e,t)=>t===c.messages.length-1?{...e,content:o}:e);C({field:"selectedConversation",value:c={...c,messages:e}})}}saveConversation(c);let i=d.map(e=>e.id===s.id?c:e);0===i.length&&i.push(c),C({field:"conversations",value:i}),saveConversations(i),C({field:"messageIsStreaming",value:!1})}}},[m,d,p,s,l]);(0,i.useCallback)(()=>{if(I){var e,t;null===(e=L.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}),null===(t=G.current)||void 0===t||t.focus()}},[I]);let K=(t=()=>{if(I){var e;null===(e=L.current)||void 0===e||e.scrollIntoView(!0)}},function(){for(var e=arguments.length,l=Array(e),n=0;n<e;n++)l[n]=arguments[n];a?(clearTimeout(r),r=setTimeout(()=>{Date.now()-a>=250&&(t(...l),a=Date.now())},250-(Date.now()-a))):(t(...l),a=Date.now())});return(0,i.useEffect)(()=>{K(),s&&N(s.messages[s.messages.length-2])},[s,K]),(0,i.useEffect)(()=>{let e=new IntersectionObserver(e=>{let[t]=e;if(E(t.isIntersecting),t.isIntersecting){var r;null===(r=G.current)||void 0===r||r.focus()}},{root:null,threshold:.5}),t=L.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[L]),(0,o.jsx)("div",{className:"relative flex-1 overflow-hidden bg-white dark:bg-[#343541]",children:m||x?g?(0,o.jsx)(ErrorMessageDiv,{error:g}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{className:"max-h-full overflow-x-hidden",ref:A,onScroll:()=>{if(A.current){let{scrollTop:e,scrollHeight:t,clientHeight:r}=A.current;e+r<t-30?(E(!1),D(!0)):(E(!0),D(!1))}},children:(null==s?void 0:s.messages.length)===0?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"mx-auto flex flex-col space-y-5 md:space-y-10 px-3 pt-5 md:pt-12 sm:max-w-[600px]",children:[(0,o.jsx)("div",{className:"text-center text-3xl font-semibold text-gray-800 dark:text-gray-100",children:0===u.length?(0,o.jsx)("div",{children:(0,o.jsx)(Spinner_Spinner,{size:"25px",className:"mx-auto"})}):"RULZ-AI"}),u.length>0&&(0,o.jsxs)("div",{className:"flex h-full flex-col space-y-4 rounded-lg border border-neutral-200 p-4 dark:border-neutral-600",children:[(0,o.jsx)(ModelSelect,{}),(0,o.jsx)(SystemPrompt,{conversation:s,prompts:f,onChangePrompt:e=>k(s,{key:"prompt",value:e})}),(0,o.jsx)(TemperatureSlider,{label:n("Temperature"),onChangeTemperature:e=>k(s,{key:"temperature",value:e})})]})]})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"sticky top-0 z-10 flex justify-center border border-b-neutral-300 bg-neutral-100 py-2 text-sm text-neutral-500 dark:border-none dark:bg-[#444654] dark:text-neutral-200",children:[n("Model"),": ",null==s?void 0:s.model.name," | ",n("Temp"),": ",null==s?void 0:s.temperature," |",(0,o.jsx)("button",{className:"ml-2 cursor-pointer hover:opacity-50",onClick:()=>{O(!P)},children:(0,o.jsx)(b.Z,{size:18})}),(0,o.jsx)("button",{className:"ml-2 cursor-pointer hover:opacity-50",onClick:()=>{confirm(n("Are you sure you want to clear all messages?"))&&s&&k(s,{key:"messages",value:[]})},children:(0,o.jsx)(y.Z,{size:18})})]}),P&&(0,o.jsx)("div",{className:"flex flex-col space-y-10 md:mx-auto md:max-w-xl md:gap-6 md:py-3 md:pt-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:(0,o.jsx)("div",{className:"flex h-full flex-col space-y-4 border-b border-neutral-200 p-4 dark:border-neutral-600 md:rounded-lg md:border",children:(0,o.jsx)(ModelSelect,{})})}),null==s?void 0:s.messages.map((e,t)=>(0,o.jsx)(V,{message:e,messageIndex:t,onEdit:e=>{N(e),T(e,(null==s?void 0:s.messages.length)-t)}},t)),v&&(0,o.jsx)(ChatLoader,{}),(0,o.jsx)("div",{className:"h-[162px] bg-white dark:bg-[#343541]",ref:L})]})}),(0,o.jsx)(ChatInput,{stopConversationRef:l,textareaRef:G,onSend:(e,t)=>{N(e),T(e,0,t)},onScrollDownClick:()=>{var e;null===(e=A.current)||void 0===e||e.scrollTo({top:A.current.scrollHeight,behavior:"smooth"})},onRegenerate:()=>{S&&T(S,2,null)},showScrollDownButton:_})]}):(0,o.jsxs)("div",{className:"mx-auto flex h-full w-[300px] flex-col justify-center space-y-6 sm:w-[600px]",children:[(0,o.jsx)("div",{className:"text-center text-4xl font-bold text-black dark:text-white",children:"Welcome to Rulz-AI"}),(0,o.jsxs)("div",{className:"text-center text-lg text-black dark:text-white",children:[(0,o.jsx)("div",{className:"mb-8",children:"Rulz-AI is an open source clone of OpenAI's ChatGPT UI."}),(0,o.jsx)("div",{className:"mb-2 font-bold",children:"Important: Rulz-AI is 100% unaffiliated with OpenAI."})]}),(0,o.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[(0,o.jsx)("div",{className:"mb-15",children:"Rulz-AI allows you to plug in your API key to use this UI with their API."}),(0,o.jsxs)("div",{className:"mb-15",children:["It is ",(0,o.jsx)("span",{className:"italic",children:"only"})," used to communicate with their API."]}),(0,o.jsx)("div",{className:"mb-12",children:n("Please set your OpenAI API key in the bottom left of the sidebar.")}),(0,o.jsxs)("div",{children:[n("If you don't have an OpenAI API key, you can get one here: "),(0,o.jsx)("a",{href:"https://platform.openai.com/account/api-keys",target:"_blank",rel:"noreferrer",className:"text-blue-500 hover:underline",children:"openai.com"})]})]})]})})});Y.displayName="Chat";let exportData=()=>{let e=localStorage.getItem("conversationHistory"),t=localStorage.getItem("folders"),r=localStorage.getItem("prompts");e&&(e=JSON.parse(e)),t&&(t=JSON.parse(t)),r&&(r=JSON.parse(r));let a={version:4,history:e||[],folders:t||[],prompts:r||[]},l=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),n=URL.createObjectURL(l),s=document.createElement("a");s.download="rulz_ai_history_".concat(function(){let e=new Date,t=e.getMonth()+1,r=e.getDate();return"".concat(t,"-").concat(r)}(),".json"),s.href=n,s.style.display="none",document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)},importData=e=>{let{history:t,folders:r,prompts:a}=function(e){if(Array.isArray(e))return{version:4,history:cleanConversationHistory(e),folders:[],prompts:[]};if(!("version"in e)&&"folders"in e&&"history"in e)return{version:4,history:cleanConversationHistory(e.history||[]),folders:(e.folders||[]).map(e=>({id:e.id.toString(),name:e.name,type:"chat"})),prompts:[]};if(3===e.version)return{...e,version:4,prompts:[]};if(4===e.version)return e;throw Error("Unsupported data format")}(e),l=localStorage.getItem("conversationHistory"),n=l?JSON.parse(l):[],s=[...n,...t].filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id));localStorage.setItem("conversationHistory",JSON.stringify(s)),s.length>0?localStorage.setItem("selectedConversation",JSON.stringify(s[s.length-1])):localStorage.removeItem("selectedConversation");let o=localStorage.getItem("folders"),i=o?JSON.parse(o):[],d=[...i,...r].filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id));localStorage.setItem("folders",JSON.stringify(d));let c=localStorage.getItem("prompts"),u=c?JSON.parse(c):[],m=[...u,...a].filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id));return localStorage.setItem("prompts",JSON.stringify(m)),{version:4,history:s,folders:d,prompts:m}};var W=r(87664),X=r(62577),Q=r(97283),ee=r(30471),SidebarActionButton_SidebarActionButton=e=>{let{handleClick:t,children:r}=e;return(0,o.jsx)("button",{className:"min-w-[20px] p-1 text-neutral-400 hover:text-neutral-100",onClick:t,children:r})},Folder_Folder=e=>{let{currentFolder:t,searchTerm:r,handleDrop:a,folderComponent:l}=e,{handleDeleteFolder:n,handleUpdateFolder:s}=(0,i.useContext)(j),[d,c]=(0,i.useState)(!1),[u,m]=(0,i.useState)(!1),[p,x]=(0,i.useState)(""),[h,g]=(0,i.useState)(!1),handleRename=()=>{s(t.id,p),x(""),m(!1)},dropHandler=e=>{e.dataTransfer&&(g(!0),a(e,t),e.target.style.background="none")};return(0,i.useEffect)(()=>{u?c(!1):d&&m(!1)},[u,d]),(0,i.useEffect)(()=>{r?g(!0):g(!1)},[r]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"relative flex items-center",children:[u?(0,o.jsxs)("div",{className:"flex w-full items-center gap-3 bg-[#343541]/90 p-3",children:[h?(0,o.jsx)(W.Z,{size:18}):(0,o.jsx)(X.Z,{size:18}),(0,o.jsx)("input",{className:"mr-12 flex-1 overflow-hidden overflow-ellipsis border-neutral-400 bg-transparent text-left text-[12.5px] leading-3 text-white outline-none focus:border-neutral-100",type:"text",value:p,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),handleRename())},autoFocus:!0})]}):(0,o.jsxs)("button",{className:"flex w-full cursor-pointer items-center gap-3 rounded-lg p-3 text-sm transition-colors duration-200 hover:bg-[#343541]/90",onClick:()=>g(!h),onDrop:e=>dropHandler(e),onDragOver:e=>{e.preventDefault()},onDragEnter:e=>{e.target.style.background="#343541"},onDragLeave:e=>{e.target.style.background="none"},children:[h?(0,o.jsx)(W.Z,{size:18}):(0,o.jsx)(X.Z,{size:18}),(0,o.jsx)("div",{className:"relative max-h-5 flex-1 overflow-hidden text-ellipsis whitespace-nowrap break-all text-left text-[12.5px] leading-3",children:t.name})]}),(d||u)&&(0,o.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),d?n(t.id):u&&handleRename(),c(!1),m(!1)},children:(0,o.jsx)(G.Z,{size:18})}),(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),c(!1),m(!1)},children:(0,o.jsx)(Q.Z,{size:18})})]}),!d&&!u&&(0,o.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),m(!0),x(t.name)},children:(0,o.jsx)(ee.Z,{size:18})}),(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),c(!0)},children:(0,o.jsx)(A.Z,{size:18})})]})]}),h?l:null]})},et=r(47447);let er=(0,i.createContext)(void 0),ConversationComponent=e=>{let{conversation:t}=e,{state:{selectedConversation:r,messageIsStreaming:a},handleSelectConversation:l,handleUpdateConversation:n}=(0,i.useContext)(j),{handleDeleteConversation:s}=(0,i.useContext)(er),[d,c]=(0,i.useState)(!1),[u,m]=(0,i.useState)(!1),[p,x]=(0,i.useState)(""),handleDragStart=(e,t)=>{e.dataTransfer&&e.dataTransfer.setData("conversation",JSON.stringify(t))},handleRename=e=>{p.trim().length>0&&(n(e,{key:"name",value:p}),x(""),m(!1))};return(0,i.useEffect)(()=>{u?c(!1):d&&m(!1)},[u,d]),(0,o.jsxs)("div",{className:"relative flex items-center",children:[u&&(null==r?void 0:r.id)===t.id?(0,o.jsxs)("div",{className:"flex w-full items-center gap-3 rounded-lg bg-[#343541]/90 p-3",children:[(0,o.jsx)(et.Z,{size:18}),(0,o.jsx)("input",{className:"mr-12 flex-1 overflow-hidden overflow-ellipsis border-neutral-400 bg-transparent text-left text-[12.5px] leading-3 text-white outline-none focus:border-neutral-100",type:"text",value:p,onChange:e=>x(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),r&&handleRename(r))},autoFocus:!0})]}):(0,o.jsxs)("button",{className:"flex w-full cursor-pointer items-center gap-3 rounded-lg p-3 text-sm transition-colors duration-200 hover:bg-[#343541]/90 ".concat(a?"disabled:cursor-not-allowed":""," ").concat((null==r?void 0:r.id)===t.id?"bg-[#343541]/90":""),onClick:()=>l(t),disabled:a,draggable:"true",onDragStart:e=>handleDragStart(e,t),children:[(0,o.jsx)(et.Z,{size:18}),(0,o.jsx)("div",{className:"relative max-h-5 flex-1 overflow-hidden text-ellipsis whitespace-nowrap break-all text-left text-[12.5px] leading-3 ".concat((null==r?void 0:r.id)===t.id?"pr-12":"pr-1"),children:t.name})]}),(d||u)&&(null==r?void 0:r.id)===t.id&&(0,o.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),d?s(t):u&&handleRename(t),c(!1),m(!1)},children:(0,o.jsx)(G.Z,{size:18})}),(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),c(!1),m(!1)},children:(0,o.jsx)(Q.Z,{size:18})})]}),(null==r?void 0:r.id)===t.id&&!d&&!u&&(0,o.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),m(!0),r&&x(r.name)},children:(0,o.jsx)(ee.Z,{size:18})}),(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),c(!0)},children:(0,o.jsx)(A.Z,{size:18})})]})]})},ChatFolders=e=>{let{searchTerm:t}=e,{state:{folders:r,conversations:a},handleUpdateConversation:l}=(0,i.useContext)(j),handleDrop=(e,t)=>{if(e.dataTransfer){let r=JSON.parse(e.dataTransfer.getData("conversation"));l(r,{key:"folderId",value:t.id})}},ChatFolders=e=>a&&a.filter(e=>e.folderId).map((t,r)=>{if(t.folderId===e.id)return(0,o.jsx)("div",{className:"ml-5 gap-2 border-l pl-2",children:(0,o.jsx)(ConversationComponent,{conversation:t})},r)});return(0,o.jsx)("div",{className:"flex w-full flex-col pt-2",children:r.filter(e=>"chat"===e.type).sort((e,t)=>e.name.localeCompare(t.name)).map((e,r)=>(0,o.jsx)(Folder_Folder,{searchTerm:t,currentFolder:e,handleDrop:handleDrop,folderComponent:ChatFolders(e)},r))})};var ea=r(75846);let SettingDialog=e=>{let{open:t,onClose:r}=e,{t:a}=(0,c.$G)("settings"),l=getSettings(),{state:n,dispatch:s}=useCreateReducer({initialState:l}),{dispatch:d}=(0,i.useContext)(j),u=(0,i.useRef)(null);(0,i.useEffect)(()=>{let handleMouseDown=e=>{u.current&&!u.current.contains(e.target)&&window.addEventListener("mouseup",handleMouseUp)},handleMouseUp=e=>{window.removeEventListener("mouseup",handleMouseUp),r()};return window.addEventListener("mousedown",handleMouseDown),()=>{window.removeEventListener("mousedown",handleMouseDown)}},[r]);let handleSave=()=>{d({field:"lightMode",value:n.theme}),saveSettings(n)};return t?(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:(0,o.jsx)("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,o.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,o.jsx)("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,o.jsxs)("div",{ref:u,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:bg-[#202123] sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[(0,o.jsx)("div",{className:"text-lg pb-4 font-bold text-black dark:text-neutral-200",children:a("Settings")}),(0,o.jsx)("div",{className:"text-sm font-bold mb-2 text-black dark:text-neutral-200",children:a("Theme")}),(0,o.jsxs)("select",{className:"w-full cursor-pointer bg-transparent p-2 text-neutral-700 dark:text-neutral-200",value:n.theme,onChange:e=>s({field:"theme",value:e.target.value}),children:[(0,o.jsx)("option",{value:"dark",children:a("Dark mode")}),(0,o.jsx)("option",{value:"light",children:a("Light mode")})]}),(0,o.jsx)("button",{type:"button",className:"w-full px-4 py-2 mt-6 border rounded-lg shadow border-neutral-500 text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:()=>{handleSave(),r()},children:a("Save")})]})]})})}):(0,o.jsx)(o.Fragment,{})};var el=r(52216);let SidebarButton=e=>{let{text:t,icon:r,onClick:a}=e;return(0,o.jsxs)("button",{className:"flex w-full cursor-pointer select-none items-center gap-3 rounded-md py-3 px-3 text-[14px] leading-3 text-white transition-colors duration-200 hover:bg-gray-500/10",onClick:a,children:[(0,o.jsx)("div",{children:r}),(0,o.jsx)("span",{children:t})]})},Import=e=>{let{onImport:t}=e,{t:r}=(0,c.$G)("sidebar");return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("input",{id:"import-file",className:"sr-only",tabIndex:-1,type:"file",accept:".json",onChange:e=>{var r;if(!(null===(r=e.target.files)||void 0===r?void 0:r.length))return;let a=e.target.files[0],l=new FileReader;l.onload=e=>{var r;t(JSON.parse(null===(r=e.target)||void 0===r?void 0:r.result))},l.readAsText(a)}}),(0,o.jsx)(SidebarButton,{text:r("Import data"),icon:(0,o.jsx)(el.Z,{size:18}),onClick:()=>{let e=document.querySelector("#import-file");e&&e.click()}})]})};var en=r(35336);let Key=e=>{let{apiKey:t,onApiKeyChange:r}=e,{t:a}=(0,c.$G)("sidebar"),[l,n]=(0,i.useState)(!1),[s,d]=(0,i.useState)(t),u=(0,i.useRef)(null),handleUpdateKey=e=>{r(e.trim()),n(!1)};return(0,i.useEffect)(()=>{if(l){var e;null===(e=u.current)||void 0===e||e.focus()}},[l]),l?(0,o.jsxs)("div",{className:"duration:200 flex w-full cursor-pointer items-center rounded-md py-3 px-3 transition-colors hover:bg-gray-500/10",children:[(0,o.jsx)(en.Z,{size:18}),(0,o.jsx)("input",{ref:u,className:"ml-2 h-[20px] flex-1 overflow-hidden overflow-ellipsis border-b border-neutral-400 bg-transparent pr-1 text-[12.5px] leading-3 text-left text-white outline-none focus:border-neutral-100",type:"password",value:s,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),handleUpdateKey(s))},placeholder:a("API Key")||"API Key"}),(0,o.jsxs)("div",{className:"flex w-[40px]",children:[(0,o.jsx)(G.Z,{className:"ml-auto min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),handleUpdateKey(s)}}),(0,o.jsx)(Q.Z,{className:"ml-auto min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),n(!1),d(t)}})]})]}):(0,o.jsx)(SidebarButton,{text:a("OpenAI API Key"),icon:(0,o.jsx)(en.Z,{size:18}),onClick:()=>n(!0)})},ClearConversations=e=>{let{onClearConversations:t}=e,[r,a]=(0,i.useState)(!1),{t:l}=(0,c.$G)("sidebar"),handleClearConversations=()=>{t(),a(!1)};return r?(0,o.jsxs)("div",{className:"flex w-full cursor-pointer items-center rounded-lg py-3 px-3 hover:bg-gray-500/10",children:[(0,o.jsx)(A.Z,{size:18}),(0,o.jsx)("div",{className:"ml-3 flex-1 text-left text-[12.5px] leading-3 text-white",children:l("Are you sure?")}),(0,o.jsxs)("div",{className:"flex w-[40px]",children:[(0,o.jsx)(G.Z,{className:"ml-auto mr-1 min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),handleClearConversations()}}),(0,o.jsx)(Q.Z,{className:"ml-auto min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),a(!1)}})]})]}):(0,o.jsx)(SidebarButton,{text:l("Clear conversations"),icon:(0,o.jsx)(A.Z,{size:18}),onClick:()=>a(!0)})};var es=r(67421);let PluginKeys=()=>{var e,t,r,a;let{t:l}=(0,es.$G)("sidebar"),{state:{pluginKeys:s}}=(0,i.useContext)(j),{handlePluginKeyChange:d,handleClearPluginKey:c}=(0,i.useContext)(er),[u,m]=(0,i.useState)(!1),p=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let handleMouseDown=e=>{p.current&&!p.current.contains(e.target)&&window.addEventListener("mouseup",handleMouseUp)},handleMouseUp=e=>{window.removeEventListener("mouseup",handleMouseUp),m(!1)};return window.addEventListener("mousedown",handleMouseDown),()=>{window.removeEventListener("mousedown",handleMouseDown)}},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(SidebarButton,{text:l("Plugin Keys"),icon:(0,o.jsx)(en.Z,{size:18}),onClick:()=>m(!0)}),u&&(0,o.jsx)("div",{className:"z-100 fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),m(!1))},children:(0,o.jsx)("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,o.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,o.jsx)("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,o.jsxs)("div",{ref:p,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:bg-[#202123] sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[(0,o.jsx)("div",{className:"mb-10 text-4xl",children:"Plugin Keys"}),(0,o.jsxs)("div",{className:"mt-6 rounded border p-4",children:[(0,o.jsx)("div",{className:"text-xl font-bold",children:"Google Search Plugin"}),(0,o.jsx)("div",{className:"mt-4 italic",children:"Please enter your Google API Key and Google CSE ID to enable the Google Search Plugin."}),(0,o.jsx)("div",{className:"mt-6 text-sm font-bold text-black dark:text-neutral-200",children:"Google API Key"}),(0,o.jsx)("input",{className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",type:"password",value:null===(t=s.find(e=>e.pluginId===n.GOOGLE_SEARCH))||void 0===t?void 0:null===(e=t.requiredKeys.find(e=>"GOOGLE_API_KEY"===e.key))||void 0===e?void 0:e.value,onChange:e=>{let t=s.find(e=>e.pluginId===n.GOOGLE_SEARCH);if(t){let r=t.requiredKeys.find(e=>"GOOGLE_API_KEY"===e.key);if(r){let r={...t,requiredKeys:t.requiredKeys.map(t=>"GOOGLE_API_KEY"===t.key?{...t,value:e.target.value}:t)};d(r)}}else{let t={pluginId:n.GOOGLE_SEARCH,requiredKeys:[{key:"GOOGLE_API_KEY",value:e.target.value},{key:"GOOGLE_CSE_ID",value:""}]};d(t)}}}),(0,o.jsx)("div",{className:"mt-6 text-sm font-bold text-black dark:text-neutral-200",children:"Google CSE ID"}),(0,o.jsx)("input",{className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",type:"password",value:null===(a=s.find(e=>e.pluginId===n.GOOGLE_SEARCH))||void 0===a?void 0:null===(r=a.requiredKeys.find(e=>"GOOGLE_CSE_ID"===e.key))||void 0===r?void 0:r.value,onChange:e=>{let t=s.find(e=>e.pluginId===n.GOOGLE_SEARCH);if(t){let r=t.requiredKeys.find(e=>"GOOGLE_CSE_ID"===e.key);if(r){let r={...t,requiredKeys:t.requiredKeys.map(t=>"GOOGLE_CSE_ID"===t.key?{...t,value:e.target.value}:t)};d(r)}}else{let t={pluginId:n.GOOGLE_SEARCH,requiredKeys:[{key:"GOOGLE_API_KEY",value:""},{key:"GOOGLE_CSE_ID",value:e.target.value}]};d(t)}}}),(0,o.jsx)("button",{className:"mt-6 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:()=>{let e=s.find(e=>e.pluginId===n.GOOGLE_SEARCH);e&&c(e)},children:"Clear Google Search Plugin Keys"})]}),(0,o.jsx)("button",{type:"button",className:"mt-6 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:()=>m(!1),children:l("Save")})]})]})})})]})},ChatbarSettings=()=>{let{t:e}=(0,c.$G)("sidebar"),[t,r]=(0,i.useState)(!1),{state:{apiKey:a,lightMode:l,serverSideApiKeyIsSet:n,serverSidePluginKeysSet:s,conversations:d},dispatch:u}=(0,i.useContext)(j),{handleClearConversations:m,handleImportConversations:p,handleExportData:x,handleApiKeyChange:h}=(0,i.useContext)(er);return(0,o.jsxs)("div",{className:"flex flex-col items-center space-y-1 border-t border-white/20 pt-1 text-sm",children:[d.length>0?(0,o.jsx)(ClearConversations,{onClearConversations:m}):null,(0,o.jsx)(Import,{onImport:p}),(0,o.jsx)(SidebarButton,{text:e("Export data"),icon:(0,o.jsx)(ea.Z,{size:18}),onClick:()=>x()}),(0,o.jsx)(SidebarButton,{text:e("Settings"),icon:(0,o.jsx)(b.Z,{size:18}),onClick:()=>r(!0)}),n?null:(0,o.jsx)(Key,{apiKey:a,onApiKeyChange:h}),s?null:(0,o.jsx)(PluginKeys,{}),(0,o.jsx)(SettingDialog,{open:t,onClose:()=>{r(!1)}})]})},Conversations=e=>{let{conversations:t}=e;return(0,o.jsx)("div",{className:"flex w-full flex-col gap-1",children:t.filter(e=>!e.folderId).slice().reverse().map((e,t)=>(0,o.jsx)(ConversationComponent,{conversation:e},t))})};var eo=r(1177),ei=r(16745),ed=r(92005),ec=r(98963),eu=r(89014);let CloseSidebarButton=e=>{let{onClick:t,side:r}=e;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{className:"fixed top-5 ".concat("right"===r?"right-[270px]":"left-[270px]"," z-50 h-7 w-7 hover:text-gray-400 dark:text-white dark:hover:text-gray-300 sm:top-0.5 sm:").concat("right"===r?"right-[270px]":"left-[270px]"," sm:h-8 sm:w-8 sm:text-neutral-700"),onClick:t,children:"right"===r?(0,o.jsx)(ec.Z,{}):(0,o.jsx)(eu.Z,{})}),(0,o.jsx)("div",{onClick:t,className:"absolute top-0 left-0 z-10 h-full w-full bg-black opacity-70 sm:hidden"})]})},OpenSidebarButton=e=>{let{onClick:t,side:r}=e;return(0,o.jsx)("button",{className:"fixed top-2.5 ".concat("right"===r?"right-2":"left-2"," z-50 h-7 w-7 text-white hover:text-gray-400 dark:text-white dark:hover:text-gray-300 sm:top-0.5 sm:").concat("right"===r?"right-2":"left-2"," sm:h-8 sm:w-8 sm:text-neutral-700"),onClick:t,children:"right"===r?(0,o.jsx)(eu.Z,{}):(0,o.jsx)(ec.Z,{})})};var Search_Search=e=>{let{placeholder:t,searchTerm:r,onSearch:a}=e,{t:l}=(0,c.$G)("sidebar");return(0,o.jsxs)("div",{className:"relative flex items-center",children:[(0,o.jsx)("input",{className:"w-full flex-1 rounded-md border border-neutral-600 bg-[#202123] px-4 py-3 pr-10 text-[14px] leading-3 text-white",type:"text",placeholder:l(t)||"",value:r,onChange:e=>{a(e.target.value)}}),r&&(0,o.jsx)(Q.Z,{className:"absolute right-4 cursor-pointer text-neutral-300 hover:text-neutral-400",size:18,onClick:()=>{a("")}})]})},Sidebar_Sidebar=e=>{let{isOpen:t,addItemButtonTitle:r,side:a,items:l,itemComponent:n,folderComponent:s,footerComponent:i,searchTerm:d,handleSearchTerm:c,toggleOpen:u,handleCreateItem:m,handleCreateFolder:p,handleDrop:x}=e,{t:h}=(0,es.$G)("promptbar");return t?(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"fixed top-0 ".concat(a,"-0 z-40 flex h-full w-[260px] flex-none flex-col space-y-2 bg-[#202123] p-2 text-[14px] transition-all sm:relative sm:top-0"),children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsxs)("button",{className:"text-sidebar flex w-[190px] flex-shrink-0 cursor-pointer select-none items-center gap-3 rounded-md border border-white/20 p-3 text-white transition-colors duration-200 hover:bg-gray-500/10",onClick:()=>{m(),c("")},children:[(0,o.jsx)(eo.Z,{size:16}),r]}),(0,o.jsx)("button",{className:"ml-2 flex flex-shrink-0 cursor-pointer items-center gap-3 rounded-md border border-white/20 p-3 text-sm text-white transition-colors duration-200 hover:bg-gray-500/10",onClick:p,children:(0,o.jsx)(ei.Z,{size:16})})]}),(0,o.jsx)(Search_Search,{placeholder:h("Search...")||"",searchTerm:d,onSearch:c}),(0,o.jsxs)("div",{className:"flex-grow overflow-auto",children:[(null==l?void 0:l.length)>0&&(0,o.jsx)("div",{className:"flex border-b border-white/20 pb-2",children:s}),(null==l?void 0:l.length)>0?(0,o.jsx)("div",{className:"pt-2",onDrop:x,onDragOver:e=>{e.preventDefault()},onDragEnter:e=>{e.target.style.background="#343541"},onDragLeave:e=>{e.target.style.background="none"},children:n}):(0,o.jsxs)("div",{className:"mt-8 select-none text-center text-white opacity-50",children:[(0,o.jsx)(ed.Z,{className:"mx-auto mb-3"}),(0,o.jsx)("span",{className:"text-[14px] leading-normal",children:h("No data.")})]})]}),i]}),(0,o.jsx)(CloseSidebarButton,{onClick:u,side:a})]}):(0,o.jsx)(OpenSidebarButton,{onClick:u,side:a})};let em={searchTerm:"",filteredConversations:[]};var ep=r(57632);let Chatbar=()=>{let{t:e}=(0,c.$G)("sidebar"),t=useCreateReducer({initialState:em}),{state:{conversations:r,showChatbar:a,defaultModelId:l,folders:n,pluginKeys:s},dispatch:d,handleCreateFolder:u,handleNewConversation:m,handleUpdateConversation:p}=(0,i.useContext)(j),{state:{searchTerm:h,filteredConversations:f},dispatch:b}=t,y=(0,i.useCallback)(e=>{d({field:"apiKey",value:e}),localStorage.setItem("apiKey",e)},[d]);return(0,i.useEffect)(()=>{h?b({field:"filteredConversations",value:r.filter(e=>{let t=e.name.toLocaleLowerCase()+" "+e.messages.map(e=>e.content).join(" ");return t.toLowerCase().includes(h.toLowerCase())})}):b({field:"filteredConversations",value:r})},[h,r]),(0,o.jsx)(er.Provider,{value:{...t,handleDeleteConversation:t=>{let a=r.filter(e=>e.id!==t.id);d({field:"conversations",value:a}),b({field:"searchTerm",value:""}),saveConversations(a),a.length>0?(d({field:"selectedConversation",value:a[a.length-1]}),saveConversation(a[a.length-1])):(l&&d({field:"selectedConversation",value:{id:(0,ep.Z)(),name:e("New Conversation"),messages:[],model:x[l],prompt:g,temperature:v,folderId:null}}),localStorage.removeItem("selectedConversation"))},handleClearConversations:()=>{l&&d({field:"selectedConversation",value:{id:(0,ep.Z)(),name:e("New Conversation"),messages:[],model:x[l],prompt:g,temperature:v,folderId:null}}),d({field:"conversations",value:[]}),localStorage.removeItem("conversationHistory"),localStorage.removeItem("selectedConversation");let t=n.filter(e=>"chat"!==e.type);d({field:"folders",value:t}),saveFolders(t)},handleImportConversations:e=>{let{history:t,folders:r,prompts:a}=importData(e);d({field:"conversations",value:t}),d({field:"selectedConversation",value:t[t.length-1]}),d({field:"folders",value:r}),d({field:"prompts",value:a}),window.location.reload()},handleExportData:()=>{exportData()},handlePluginKeyChange:e=>{if(s.some(t=>t.pluginId===e.pluginId)){let t=s.map(t=>t.pluginId===e.pluginId?e:t);d({field:"pluginKeys",value:t}),localStorage.setItem("pluginKeys",JSON.stringify(t))}else d({field:"pluginKeys",value:[...s,e]}),localStorage.setItem("pluginKeys",JSON.stringify([...s,e]))},handleClearPluginKey:e=>{let t=s.filter(t=>t.pluginId!==e.pluginId);if(0===t.length){d({field:"pluginKeys",value:[]}),localStorage.removeItem("pluginKeys");return}d({field:"pluginKeys",value:t}),localStorage.setItem("pluginKeys",JSON.stringify(t))},handleApiKeyChange:y},children:(0,o.jsx)(Sidebar_Sidebar,{side:"left",isOpen:a,addItemButtonTitle:e("New chat"),itemComponent:(0,o.jsx)(Conversations,{conversations:f}),folderComponent:(0,o.jsx)(ChatFolders,{searchTerm:h}),items:f,searchTerm:h,handleSearchTerm:e=>b({field:"searchTerm",value:e}),toggleOpen:()=>{d({field:"showChatbar",value:!a}),localStorage.setItem("showChatbar",JSON.stringify(!a))},handleCreateItem:m,handleCreateFolder:()=>u(e("New folder"),"chat"),handleDrop:e=>{if(e.dataTransfer){let t=JSON.parse(e.dataTransfer.getData("conversation"));p(t,{key:"folderId",value:0}),b({field:"searchTerm",value:""}),e.target.style.background="none"}},footerComponent:(0,o.jsx)(ChatbarSettings,{})})})},Navbar=e=>{let{selectedConversation:t,onNewConversation:r}=e;return(0,o.jsxs)("nav",{className:"flex w-full justify-between bg-[#202123] py-3 px-4",children:[(0,o.jsx)("div",{className:"mr-4"}),(0,o.jsx)("div",{className:"max-w-[240px] overflow-hidden text-ellipsis whitespace-nowrap",children:t.name}),(0,o.jsx)(eo.Z,{className:"cursor-pointer hover:text-neutral-400 mr-8",onClick:r})]})};var ex=r(12691);let eh=(0,i.createContext)(void 0),PromptModal=e=>{let{prompt:t,onClose:r,onUpdatePrompt:a}=e,{t:l}=(0,c.$G)("promptbar"),[n,s]=(0,i.useState)(t.name),[d,u]=(0,i.useState)(t.description),[m,p]=(0,i.useState)(t.content),x=(0,i.useRef)(null),h=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let handleMouseDown=e=>{x.current&&!x.current.contains(e.target)&&window.addEventListener("mouseup",handleMouseUp)},handleMouseUp=e=>{window.removeEventListener("mouseup",handleMouseUp),r()};return window.addEventListener("mousedown",handleMouseDown),()=>{window.removeEventListener("mousedown",handleMouseDown)}},[r]),(0,i.useEffect)(()=>{var e;null===(e=h.current)||void 0===e||e.focus()},[]),(0,o.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(a({...t,name:n,description:d,content:m.trim()}),r())},children:(0,o.jsx)("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,o.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,o.jsx)("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,o.jsxs)("div",{ref:x,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:bg-[#202123] sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[(0,o.jsx)("div",{className:"text-sm font-bold text-black dark:text-neutral-200",children:l("Name")}),(0,o.jsx)("input",{ref:h,className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",placeholder:l("A name for your prompt.")||"",value:n,onChange:e=>s(e.target.value)}),(0,o.jsx)("div",{className:"mt-6 text-sm font-bold text-black dark:text-neutral-200",children:l("Description")}),(0,o.jsx)("textarea",{className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",style:{resize:"none"},placeholder:l("A description for your prompt.")||"",value:d,onChange:e=>u(e.target.value),rows:3}),(0,o.jsx)("div",{className:"mt-6 text-sm font-bold text-black dark:text-neutral-200",children:l("Prompt")}),(0,o.jsx)("textarea",{className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",style:{resize:"none"},placeholder:l("Prompt content. Use {{}} to denote a variable. Ex: {{name}} is a {{adjective}} {{noun}}")||"",value:m,onChange:e=>p(e.target.value),rows:10}),(0,o.jsx)("button",{type:"button",className:"w-full px-4 py-2 mt-6 border rounded-lg shadow border-neutral-500 text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:()=>{let e={...t,name:n,description:d,content:m.trim()};a(e),r()},children:l("Save")})]})]})})})},PromptComponent=e=>{let{prompt:t}=e,{dispatch:r,handleUpdatePrompt:a,handleDeletePrompt:l}=(0,i.useContext)(eh),[n,s]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1),[u,m]=(0,i.useState)(!1),[p,x]=(0,i.useState)(""),handleDragStart=(e,t)=>{e.dataTransfer&&e.dataTransfer.setData("prompt",JSON.stringify(t))};return(0,i.useEffect)(()=>{u?c(!1):d&&m(!1)},[u,d]),(0,o.jsxs)("div",{className:"relative flex items-center",children:[(0,o.jsxs)("button",{className:"flex w-full cursor-pointer items-center gap-3 rounded-lg p-3 text-sm transition-colors duration-200 hover:bg-[#343541]/90",draggable:"true",onClick:e=>{e.stopPropagation(),s(!0)},onDragStart:e=>handleDragStart(e,t),onMouseLeave:()=>{c(!1),m(!1),x("")},children:[(0,o.jsx)(ex.Z,{size:18}),(0,o.jsx)("div",{className:"relative max-h-5 flex-1 overflow-hidden text-ellipsis whitespace-nowrap break-all pr-4 text-left text-[12.5px] leading-3",children:t.name})]}),(d||u)&&(0,o.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),d&&(l(t),r({field:"searchTerm",value:""})),c(!1)},children:(0,o.jsx)(G.Z,{size:18})}),(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),c(!1)},children:(0,o.jsx)(Q.Z,{size:18})})]}),!d&&!u&&(0,o.jsx)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:(0,o.jsx)(SidebarActionButton_SidebarActionButton,{handleClick:e=>{e.stopPropagation(),c(!0)},children:(0,o.jsx)(A.Z,{size:18})})}),n&&(0,o.jsx)(PromptModal,{prompt:t,onClose:()=>s(!1),onUpdatePrompt:e=>{a(e),r({field:"searchTerm",value:""})}})]})},PromptFolders=()=>{let{state:{folders:e}}=(0,i.useContext)(j),{state:{searchTerm:t,filteredPrompts:r},handleUpdatePrompt:a}=(0,i.useContext)(eh),handleDrop=(e,t)=>{if(e.dataTransfer){let r=JSON.parse(e.dataTransfer.getData("prompt")),l={...r,folderId:t.id};a(l)}},PromptFolders=e=>r.filter(e=>e.folderId).map((t,r)=>{if(t.folderId===e.id)return(0,o.jsx)("div",{className:"ml-5 gap-2 border-l pl-2",children:(0,o.jsx)(PromptComponent,{prompt:t})},r)});return(0,o.jsx)("div",{className:"flex w-full flex-col pt-2",children:e.filter(e=>"prompt"===e.type).sort((e,t)=>e.name.localeCompare(t.name)).map((e,r)=>(0,o.jsx)(Folder_Folder,{searchTerm:t,currentFolder:e,handleDrop:handleDrop,folderComponent:PromptFolders(e)},r))})},Prompts=e=>{let{prompts:t}=e;return(0,o.jsx)("div",{className:"flex w-full flex-col gap-1",children:t.slice().reverse().map((e,t)=>(0,o.jsx)(PromptComponent,{prompt:e},t))})},eg={searchTerm:"",filteredPrompts:[]};var Promptbar_Promptbar=()=>{let{t:e}=(0,es.$G)("promptbar"),t=useCreateReducer({initialState:eg}),{state:{prompts:r,defaultModelId:a,showPromptbar:l},dispatch:n,handleCreateFolder:s}=(0,i.useContext)(j),{state:{searchTerm:d,filteredPrompts:c},dispatch:u}=t,handleCreatePrompt=()=>{if(a){let e={id:(0,ep.Z)(),name:"Prompt ".concat(r.length+1),description:"",content:"",model:x[a],folderId:null},t=[...r,e];n({field:"prompts",value:t}),savePrompts(t)}},handleUpdatePrompt=e=>{let t=r.map(t=>t.id===e.id?e:t);n({field:"prompts",value:t}),savePrompts(t)};return(0,i.useEffect)(()=>{d?u({field:"filteredPrompts",value:r.filter(e=>{let t=e.name.toLowerCase()+" "+e.description.toLowerCase()+" "+e.content.toLowerCase();return t.includes(d.toLowerCase())})}):u({field:"filteredPrompts",value:r})},[d,r]),(0,o.jsx)(eh.Provider,{value:{...t,handleCreatePrompt,handleDeletePrompt:e=>{let t=r.filter(t=>t.id!==e.id);n({field:"prompts",value:t}),savePrompts(t)},handleUpdatePrompt},children:(0,o.jsx)(Sidebar_Sidebar,{side:"right",isOpen:l,addItemButtonTitle:e("New prompt"),itemComponent:(0,o.jsx)(Prompts,{prompts:c.filter(e=>!e.folderId)}),folderComponent:(0,o.jsx)(PromptFolders,{}),items:c,searchTerm:d,handleSearchTerm:e=>u({field:"searchTerm",value:e}),toggleOpen:()=>{n({field:"showPromptbar",value:!l}),localStorage.setItem("showPromptbar",JSON.stringify(!l))},handleCreateItem:handleCreatePrompt,handleCreateFolder:()=>s(e("New folder"),"prompt"),handleDrop:e=>{if(e.dataTransfer){let t=JSON.parse(e.dataTransfer.getData("prompt")),r={...t,folderId:e.target.dataset.folderId};handleUpdatePrompt(r),e.target.style.background="none"}}})})};let ev={apiKey:"",loading:!1,pluginKeys:[],lightMode:"dark",messageIsStreaming:!1,modelError:null,models:[],folders:[],conversations:[],selectedConversation:void 0,currentMessage:void 0,prompts:[],temperature:1,showPromptbar:!0,showChatbar:!0,currentFolder:void 0,messageError:!1,searchTerm:"",defaultModelId:void 0,serverSideApiKeyIsSet:!1,serverSidePluginKeysSet:!1};var home=e=>{let{serverSideApiKeyIsSet:t,serverSidePluginKeysSet:r,defaultModelId:a}=e,{t:l}=(0,c.$G)("chat"),{getModels:n}=services_useApiService(),{getModelsError:s}=errorService(),[u,p]=(0,i.useState)(!0),h=useCreateReducer({initialState:ev}),{state:{apiKey:f,lightMode:b,folders:y,conversations:w,selectedConversation:k,prompts:C,temperature:S},dispatch:N}=h,I=(0,i.useRef)(!1),{data:E,error:P,refetch:O}=(0,d.useQuery)(["GetModels",f,t],e=>{let{signal:r}=e;return f||t?n({key:f},r):null},{enabled:!0,refetchOnMount:!1});(0,i.useEffect)(()=>{E&&N({field:"models",value:E})},[E,N]),(0,i.useEffect)(()=>{N({field:"modelError",value:s(P)})},[N,P,s]);let handleNewConversation=()=>{var e;let t=w[w.length-1],r={id:(0,ep.Z)(),name:l("New Conversation"),messages:[],model:(null==t?void 0:t.model)||{id:x[a].id,name:x[a].name,maxLength:x[a].maxLength,tokenLimit:x[a].tokenLimit},prompt:g,temperature:null!==(e=null==t?void 0:t.temperature)&&void 0!==e?e:v,folderId:null},n=[...w,r];N({field:"selectedConversation",value:r}),N({field:"conversations",value:n}),saveConversation(r),saveConversations(n),N({field:"loading",value:!1})};return(0,i.useEffect)(()=>{window.innerWidth<640&&N({field:"showChatbar",value:!1})},[k]),(0,i.useEffect)(()=>{a&&N({field:"defaultModelId",value:a}),t&&N({field:"serverSideApiKeyIsSet",value:t}),r&&N({field:"serverSidePluginKeysSet",value:r})},[a,t,r]),(0,i.useEffect)(()=>{let e=getSettings();e.theme&&N({field:"lightMode",value:e.theme});let n=localStorage.getItem("apiKey");t?(N({field:"apiKey",value:""}),localStorage.removeItem("apiKey")):n&&N({field:"apiKey",value:n});let s=localStorage.getItem("pluginKeys");r?(N({field:"pluginKeys",value:[]}),localStorage.removeItem("pluginKeys")):s&&N({field:"pluginKeys",value:s}),window.innerWidth<640&&(N({field:"showChatbar",value:!1}),N({field:"showPromptbar",value:!1}));let o=localStorage.getItem("showChatbar");o&&N({field:"showChatbar",value:"true"===o});let i=localStorage.getItem("showPromptbar");i&&N({field:"showPromptbar",value:"true"===i});let d=localStorage.getItem("folders");d&&N({field:"folders",value:JSON.parse(d)});let c=localStorage.getItem("prompts");c&&N({field:"prompts",value:JSON.parse(c)});let u=localStorage.getItem("conversationHistory");if(u){let e=JSON.parse(u),t=cleanConversationHistory(e);N({field:"conversations",value:t})}let m=localStorage.getItem("selectedConversation");if(m){let e=JSON.parse(m),t=cleanSelectedConversation(e);N({field:"selectedConversation",value:t})}else{var p;let e=w[w.length-1];N({field:"selectedConversation",value:{id:(0,ep.Z)(),name:l("New Conversation"),messages:[],model:x[a],prompt:g,temperature:null!==(p=null==e?void 0:e.temperature)&&void 0!==p?p:v,folderId:null}})}},[a,N,t,r]),(0,o.jsxs)(j.Provider,{value:{...h,handleNewConversation,handleCreateFolder:(e,t)=>{let r={id:(0,ep.Z)(),name:e,type:t},a=[...y,r];N({field:"folders",value:a}),saveFolders(a)},handleDeleteFolder:e=>{let t=y.filter(t=>t.id!==e);N({field:"folders",value:t}),saveFolders(t);let r=w.map(t=>t.folderId===e?{...t,folderId:null}:t);N({field:"conversations",value:r}),saveConversations(r);let a=C.map(t=>t.folderId===e?{...t,folderId:null}:t);N({field:"prompts",value:a}),savePrompts(a)},handleUpdateFolder:(e,t)=>{let r=y.map(r=>r.id===e?{...r,name:t}:r);N({field:"folders",value:r}),saveFolders(r)},handleSelectConversation:e=>{N({field:"selectedConversation",value:e}),saveConversation(e)},handleUpdateConversation:(e,t)=>{let r={...e,[t.key]:t.value},{single:a,all:l}=updateConversation(r,w);N({field:"selectedConversation",value:a}),N({field:"conversations",value:l})}},children:[(0,o.jsxs)(m(),{children:[(0,o.jsx)("title",{children:"Rulz-AI"}),(0,o.jsx)("meta",{name:"description",content:"Rulz-AI is a Powerful Language Model."}),(0,o.jsx)("meta",{name:"viewport",content:"height=device-height ,width=device-width, initial-scale=1, user-scalable=no"}),(0,o.jsx)("link",{rel:"icon",href:"/IconRobot.ico"})]}),k&&(0,o.jsxs)("main",{className:"flex h-screen w-screen flex-col text-sm text-white dark:text-white ".concat(b),children:[(0,o.jsx)("div",{className:"fixed top-0 w-full sm:hidden",children:(0,o.jsx)(Navbar,{selectedConversation:k,onNewConversation:handleNewConversation})}),(0,o.jsxs)("div",{className:"flex h-full w-full pt-[48px] sm:pt-0",children:[(0,o.jsx)(Chatbar,{}),(0,o.jsx)("div",{className:"flex flex-1",children:(0,o.jsx)(Y,{stopConversationRef:I})}),(0,o.jsx)(Promptbar_Promptbar,{})]})]})]})},ef=!0}},function(e){e.O(0,[879,997,774,888,179],function(){return e(e.s=48312)}),_N_E=e.O()}]);