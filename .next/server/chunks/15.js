"use strict";exports.id=15,exports.ids=[15],exports.modules={5615:(e,t,r)=>{r.d(t,{Z:()=>SidebarActionButton_SidebarActionButton});var a=r(997);let SidebarActionButton_SidebarActionButton=({handleClick:e,children:t})=>a.jsx("button",{className:"min-w-[20px] p-1 text-neutral-400 hover:text-neutral-100",onClick:e,children:t})},1805:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{e:()=>j});var l=r(997),s=r(1383),n=r(7034),o=r(6689),i=r(6201),d=r(1377),c=r(7665),u=r(8071),m=r(1255),p=r(8512),x=r(9263),h=r(524),g=r(857),f=r(3530),v=r(8731),b=r(5550),y=r(4146),w=r(8243),k=e([i,w]);[i,w]=k.then?(await k)():k;let j=(0,o.memo)(({stopConversationRef:e})=>{let{t}=(0,d.useTranslation)("chat"),{state:{selectedConversation:r,conversations:a,models:k,apiKey:j,pluginKeys:C,serverSideApiKeyIsSet:N,messageIsStreaming:S,modelError:E,loading:I,prompts:P},handleUpdateConversation:O,dispatch:_}=(0,o.useContext)(p.default),[D,L]=(0,o.useState)(),[T,A]=(0,o.useState)(!0),[K,Z]=(0,o.useState)(!1),[z,G]=(0,o.useState)(!1),M=(0,o.useRef)(null),R=(0,o.useRef)(null),F=(0,o.useRef)(null),U=(0,o.useCallback)(async(t,l=0,s=null)=>{if(r){let n,o;if(l){let e=[...r.messages];for(let t=0;t<l;t++)e.pop();n={...r,messages:[...e,t]}}else n={...r,messages:[...r.messages,t]};_({field:"selectedConversation",value:n}),_({field:"loading",value:!0}),_({field:"messageIsStreaming",value:!0});let d={model:n.model,messages:n.messages,key:j,prompt:n.prompt,temperature:n.temperature},m=(0,c.O)(s);o=s?JSON.stringify({...d,googleAPIKey:C.find(e=>"google-search"===e.pluginId)?.requiredKeys.find(e=>"GOOGLE_API_KEY"===e.key)?.value,googleCSEId:C.find(e=>"google-search"===e.pluginId)?.requiredKeys.find(e=>"GOOGLE_CSE_ID"===e.key)?.value}):JSON.stringify(d);let p=new AbortController,x=await fetch(m,{method:"POST",headers:{"Content-Type":"application/json"},signal:p.signal,body:o});if(!x.ok){_({field:"loading",value:!1}),_({field:"messageIsStreaming",value:!1}),i.default.error(x.statusText);return}let h=x.body;if(!h){_({field:"loading",value:!1}),_({field:"messageIsStreaming",value:!1});return}if(s){let{answer:e}=await x.json(),t=[...n.messages,{role:"assistant",content:e}];n={...n,messages:t},_({field:"selectedConversation",value:u.X1}),(0,u.m7)(n);let l=a.map(e=>e.id===r.id?n:e);0===l.length&&l.push(n),_({field:"conversations",value:l}),(0,u.fB)(l),_({field:"loading",value:!1}),_({field:"messageIsStreaming",value:!1})}else{if(1===n.messages.length){let{content:e}=t,r=e.length>30?e.substring(0,30)+"...":e;n={...n,name:r}}_({field:"loading",value:!1});let l=h.getReader(),s=new TextDecoder,o=!1,i=!0,d="";for(;!o;){if(!0===e.current){p.abort(),o=!0;break}let{value:t,done:r}=await l.read();o=r;let a=s.decode(t);if(d+=a,i){i=!1;let e=[...n.messages,{role:"assistant",content:a}];n={...n,messages:e},_({field:"selectedConversation",value:n})}else{let e=n.messages.map((e,t)=>t===n.messages.length-1?{...e,content:d}:e);n={...n,messages:e},_({field:"selectedConversation",value:n})}}(0,u.m7)(n);let c=a.map(e=>e.id===r.id?n:e);0===c.length&&c.push(n),_({field:"conversations",value:c}),(0,u.fB)(c),_({field:"messageIsStreaming",value:!1})}}},[j,a,C,r,e]);(0,o.useCallback)(()=>{T&&(M.current?.scrollIntoView({behavior:"smooth"}),F.current?.focus())},[T]);let $=(0,m.P)(()=>{T&&M.current?.scrollIntoView(!0)},250);return(0,o.useEffect)(()=>{$(),r&&L(r.messages[r.messages.length-2])},[r,$]),(0,o.useEffect)(()=>{let e=new IntersectionObserver(([e])=>{A(e.isIntersecting),e.isIntersecting&&F.current?.focus()},{root:null,threshold:.5}),t=M.current;return t&&e.observe(t),()=>{t&&e.unobserve(t)}},[M]),l.jsx("div",{className:"relative flex-1 overflow-hidden bg-white dark:bg-[#343541]",children:j||N?E?l.jsx(f.Y,{error:E}):(0,l.jsxs)(l.Fragment,{children:[l.jsx("div",{className:"max-h-full overflow-x-hidden",ref:R,onScroll:()=>{if(R.current){let{scrollTop:e,scrollHeight:t,clientHeight:r}=R.current;e+r<t-30?(A(!1),G(!0)):(A(!0),G(!1))}},children:r?.messages.length===0?l.jsx(l.Fragment,{children:(0,l.jsxs)("div",{className:"mx-auto flex flex-col space-y-5 md:space-y-10 px-3 pt-5 md:pt-12 sm:max-w-[600px]",children:[l.jsx("div",{className:"text-center text-3xl font-semibold text-gray-800 dark:text-gray-100",children:0===k.length?l.jsx("div",{children:l.jsx(x.Z,{size:"25px",className:"mx-auto"})}):"RULZ-AI"}),k.length>0&&(0,l.jsxs)("div",{className:"flex h-full flex-col space-y-4 rounded-lg border border-neutral-200 p-4 dark:border-neutral-600",children:[l.jsx(v.q,{}),l.jsx(b.r,{conversation:r,prompts:P,onChangePrompt:e=>O(r,{key:"prompt",value:e})}),l.jsx(y.$,{label:t("Temperature"),onChangeTemperature:e=>O(r,{key:"temperature",value:e})})]})]})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"sticky top-0 z-10 flex justify-center border border-b-neutral-300 bg-neutral-100 py-2 text-sm text-neutral-500 dark:border-none dark:bg-[#444654] dark:text-neutral-200",children:[t("Model"),": ",r?.model.name," | ",t("Temp"),": ",r?.temperature," |",l.jsx("button",{className:"ml-2 cursor-pointer hover:opacity-50",onClick:()=>{Z(!K)},children:l.jsx(s.Z,{size:18})}),l.jsx("button",{className:"ml-2 cursor-pointer hover:opacity-50",onClick:()=>{confirm(t("Are you sure you want to clear all messages?"))&&r&&O(r,{key:"messages",value:[]})},children:l.jsx(n.Z,{size:18})})]}),K&&l.jsx("div",{className:"flex flex-col space-y-10 md:mx-auto md:max-w-xl md:gap-6 md:py-3 md:pt-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:l.jsx("div",{className:"flex h-full flex-col space-y-4 border-b border-neutral-200 p-4 dark:border-neutral-600 md:rounded-lg md:border",children:l.jsx(v.q,{})})}),r?.messages.map((e,t)=>l.jsx(w.m,{message:e,messageIndex:t,onEdit:e=>{L(e),U(e,r?.messages.length-t)}},t)),I&&l.jsx(g.G,{}),l.jsx("div",{className:"h-[162px] bg-white dark:bg-[#343541]",ref:M})]})}),l.jsx(h.x,{stopConversationRef:e,textareaRef:F,onSend:(e,t)=>{L(e),U(e,0,t)},onScrollDownClick:()=>{R.current?.scrollTo({top:R.current.scrollHeight,behavior:"smooth"})},onRegenerate:()=>{D&&U(D,2,null)},showScrollDownButton:z})]}):(0,l.jsxs)("div",{className:"mx-auto flex h-full w-[300px] flex-col justify-center space-y-6 sm:w-[600px]",children:[l.jsx("div",{className:"text-center text-4xl font-bold text-black dark:text-white",children:"Welcome to Rulz-AI"}),(0,l.jsxs)("div",{className:"text-center text-lg text-black dark:text-white",children:[l.jsx("div",{className:"mb-8",children:"Rulz-AI is an open source clone of OpenAI's ChatGPT UI."}),l.jsx("div",{className:"mb-2 font-bold",children:"Important: Rulz-AI is 100% unaffiliated with OpenAI."})]}),(0,l.jsxs)("div",{className:"text-center text-gray-500 dark:text-gray-400",children:[l.jsx("div",{className:"mb-15",children:"Rulz-AI allows you to plug in your API key to use this UI with their API."}),(0,l.jsxs)("div",{className:"mb-15",children:["It is ",l.jsx("span",{className:"italic",children:"only"})," used to communicate with their API."]}),l.jsx("div",{className:"mb-12",children:t("Please set your OpenAI API key in the bottom left of the sidebar.")}),(0,l.jsxs)("div",{children:[t("If you don't have an OpenAI API key, you can get one here: "),l.jsx("a",{href:"https://platform.openai.com/account/api-keys",target:"_blank",rel:"noreferrer",className:"text-blue-500 hover:underline",children:"openai.com"})]})]})]})})});j.displayName="Chat",a()}catch(e){a(e)}})},524:(e,t,r)=>{r.d(t,{x:()=>ChatInput});var a=r(997),l=r(7312),s=r(4753),n=r(2192),o=r(8730),i=r(9228),d=r(321),c=r(6689),u=r(1377),m=r(8512),p=r(5449);let PluginSelect=({plugin:e,onPluginChange:t,onKeyDown:r})=>{let{t:l}=(0,u.useTranslation)("chat"),s=(0,c.useRef)(null),handleKeyDown=e=>{let a=s.current,l=a?.options.length||0;"/"===e.key&&e.metaKey?(e.preventDefault(),a&&(a.selectedIndex=(a.selectedIndex+1)%l,a.dispatchEvent(new Event("change")))):"/"===e.key&&e.shiftKey&&e.metaKey?(e.preventDefault(),a&&(a.selectedIndex=(a.selectedIndex-1+l)%l,a.dispatchEvent(new Event("change")))):"Enter"===e.key?(e.preventDefault(),a&&a.dispatchEvent(new Event("change")),t(p.xN.find(e=>e.name===a?.selectedOptions[0].innerText))):r(e)};return(0,c.useEffect)(()=>{s.current&&s.current.focus()},[]),a.jsx("div",{className:"flex flex-col",children:a.jsx("div",{className:"mb-1 w-full rounded border border-neutral-200 bg-transparent pr-2 text-neutral-900 dark:border-neutral-600 dark:text-white",children:(0,a.jsxs)("select",{ref:s,className:"w-full cursor-pointer bg-transparent p-2",placeholder:l("Select a plugin")||"",value:e?.id||"",onChange:e=>{t(p.xN.find(t=>t.id===e.target.value))},onKeyDown:e=>{handleKeyDown(e)},children:[a.jsx("option",{value:"chatgpt",className:"dark:bg-[#343541] dark:text-white",children:"ChatGPT"},"chatgpt"),p.xN.map(e=>a.jsx("option",{value:e.id,className:"dark:bg-[#343541] dark:text-white",children:e.name},e.id))]})})})};var x=r(5636),h=r(5640);let ChatInput=({onSend:e,onRegenerate:t,onScrollDownClick:r,stopConversationRef:p,textareaRef:g,showScrollDownButton:f})=>{let{t:v}=(0,u.useTranslation)("chat"),{state:{selectedConversation:b,messageIsStreaming:y,prompts:w},dispatch:k}=(0,c.useContext)(m.default),[j,C]=(0,c.useState)(),[N,S]=(0,c.useState)(!1),[E,I]=(0,c.useState)(!1),[P,O]=(0,c.useState)(0),[_,D]=(0,c.useState)(""),[L,T]=(0,c.useState)([]),[A,K]=(0,c.useState)(!1),[Z,z]=(0,c.useState)(!1),[G,M]=(0,c.useState)(null),R=(0,c.useRef)(null),F=w.filter(e=>e.name.toLowerCase().includes(_.toLowerCase())),handleSend=()=>{if(!y){if(!j){alert(v("Please enter a message"));return}e({role:"user",content:j},G),C(""),M(null),window.innerWidth<640&&g&&g.current&&g.current.blur()}},isMobile=()=>{let e=void 0===window.navigator?"":navigator.userAgent;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i.test(e)},handleInitModal=()=>{let e=F[P];e&&(C(t=>{let r=t?.replace(/\/\w*$/,e.content);return r}),handlePromptSelect(e)),I(!1)},parseVariables=e=>{let t;let r=/{{(.*?)}}/g,a=[];for(;null!==(t=r.exec(e));)a.push(t[1]);return a},U=(0,c.useCallback)(e=>{let t=e.match(/\/\w*$/);t?(I(!0),D(t[0].slice(1))):(I(!1),D(""))},[]),handlePromptSelect=e=>{let t=parseVariables(e.content);T(t),t.length>0?K(!0):(C(t=>{let r=t?.replace(/\/\w*$/,e.content);return r}),U(e.content))};return(0,c.useEffect)(()=>{R.current&&(R.current.scrollTop=30*P)},[P]),(0,c.useEffect)(()=>{g&&g.current&&(g.current.style.height="inherit",g.current.style.height=`${g.current?.scrollHeight}px`,g.current.style.overflow=`${g?.current?.scrollHeight>400?"auto":"hidden"}`)},[j]),(0,c.useEffect)(()=>{let handleOutsideClick=e=>{R.current&&!R.current.contains(e.target)&&I(!1)};return window.addEventListener("click",handleOutsideClick),()=>{window.removeEventListener("click",handleOutsideClick)}},[]),(0,a.jsxs)("div",{className:"absolute bottom-0 left-0 w-full border-transparent bg-gradient-to-b from-transparent via-white to-white pt-6 dark:border-white/20 dark:via-[#343541] dark:to-[#343541] md:pt-2",children:[(0,a.jsxs)("div",{className:"stretch mx-2 mt-4 flex flex-row gap-3 last:mb-2 md:mx-4 md:mt-[52px] md:last:mb-6 lg:mx-auto lg:max-w-3xl",children:[y&&(0,a.jsxs)("button",{className:"absolute top-0 left-0 right-0 mx-auto mb-3 flex w-fit items-center gap-3 rounded border border-neutral-200 bg-white py-2 px-4 text-black hover:opacity-50 dark:border-neutral-600 dark:bg-[#343541] dark:text-white md:mb-0 md:mt-2",onClick:()=>{p.current=!0,setTimeout(()=>{p.current=!1},1e3)},children:[a.jsx(l.Z,{size:16})," ",v("Stop Generating")]}),!y&&b&&b.messages.length>0&&(0,a.jsxs)("button",{className:"absolute top-0 left-0 right-0 mx-auto mb-3 flex w-fit items-center gap-3 rounded border border-neutral-200 bg-white py-2 px-4 text-black hover:opacity-50 dark:border-neutral-600 dark:bg-[#343541] dark:text-white md:mb-0 md:mt-2",onClick:t,children:[a.jsx(s.Z,{size:16})," ",v("Regenerate response")]}),(0,a.jsxs)("div",{className:"relative mx-2 flex w-full flex-grow flex-col rounded-md border border-black/10 bg-white shadow-[0_0_10px_rgba(0,0,0,0.10)] dark:border-gray-900/50 dark:bg-[#40414F] dark:text-white dark:shadow-[0_0_15px_rgba(0,0,0,0.10)] sm:mx-4",children:[a.jsx("button",{className:"absolute left-2 top-2 rounded-sm p-1 text-neutral-800 opacity-60 hover:bg-neutral-200 hover:text-neutral-900 dark:bg-opacity-50 dark:text-neutral-100 dark:hover:text-neutral-200",onClick:()=>z(!Z),onKeyDown:e=>{},children:G?a.jsx(n.Z,{size:20}):a.jsx(o.Z,{size:20})}),Z&&a.jsx("div",{className:"absolute left-0 bottom-14 rounded bg-white dark:bg-[#343541]",children:a.jsx(PluginSelect,{plugin:G,onKeyDown:e=>{"Escape"===e.key&&(e.preventDefault(),z(!1),g.current?.focus())},onPluginChange:e=>{M(e),z(!1),g&&g.current&&g.current.focus()}})}),a.jsx("textarea",{ref:g,className:"m-0 w-full resize-none border-0 bg-transparent p-0 py-2 pr-8 pl-10 text-black dark:bg-transparent dark:text-white md:py-3 md:pl-10",style:{resize:"none",bottom:`${g?.current?.scrollHeight}px`,maxHeight:"400px",overflow:`${g.current&&g.current.scrollHeight>400?"auto":"hidden"}`},placeholder:v('Type a message or type "/" to select a prompt...')||"",value:j,rows:1,onCompositionStart:()=>S(!0),onCompositionEnd:()=>S(!1),onChange:e=>{let t=e.target.value,r=b?.model.maxLength;if(r&&t.length>r){alert(v("Message limit is {{maxLength}} characters. You have entered {{valueLength}} characters.",{maxLength:r,valueLength:t.length}));return}C(t),U(t)},onKeyDown:e=>{E?"ArrowDown"===e.key?(e.preventDefault(),O(e=>e<w.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),O(e=>e>0?e-1:e)):"Tab"===e.key?(e.preventDefault(),O(e=>e<w.length-1?e+1:0)):"Enter"===e.key?(e.preventDefault(),handleInitModal()):"Escape"===e.key?(e.preventDefault(),I(!1)):O(0):"Enter"!==e.key||N||isMobile()||e.shiftKey?"/"===e.key&&e.metaKey&&(e.preventDefault(),z(!Z)):(e.preventDefault(),handleSend())}}),a.jsx("button",{className:"absolute right-2 top-2 rounded-sm p-1 text-neutral-800 opacity-60 hover:bg-neutral-200 hover:text-neutral-900 dark:bg-opacity-50 dark:text-neutral-100 dark:hover:text-neutral-200",onClick:handleSend,children:y?a.jsx("div",{className:"h-4 w-4 animate-spin rounded-full border-t-2 border-neutral-800 opacity-60 dark:border-neutral-100"}):a.jsx(i.Z,{size:18})}),f&&a.jsx("div",{className:"absolute bottom-12 right-0 lg:bottom-0 lg:-right-10",children:a.jsx("button",{className:"flex h-7 w-7 items-center justify-center rounded-full bg-neutral-300 text-gray-800 shadow-md hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:text-neutral-200",onClick:r,children:a.jsx(d.Z,{size:18})})}),E&&F.length>0&&a.jsx("div",{className:"absolute bottom-12 w-full",children:a.jsx(x.t,{activePromptIndex:P,prompts:F,onSelect:handleInitModal,onMouseOver:O,promptListRef:R})}),A&&a.jsx(h.g,{prompt:F[P],variables:L,onSubmit:e=>{let t=j?.replace(/{{(.*?)}}/g,(t,r)=>{let a=L.indexOf(r);return e[a]});C(t),g&&g.current&&g.current.focus()},onClose:()=>K(!1)})]})]}),(0,a.jsxs)("div",{className:"px-3 pt-2 pb-3 text-center text-[12px] text-black/50 dark:text-white/50 md:px-4 md:pt-3 md:pb-6",children:[a.jsx("a",{href:"https://github.com/rulz-ai",target:"_blank",rel:"noreferrer",className:"underline",children:"RULZ-AI"})," ",v("is an advanced chatbot kit for OpenAI's chat models aiming to mimic ChatGPT's interface and functionality.")]})]})}},857:(e,t,r)=>{r.d(t,{G:()=>ChatLoader});var a=r(997),l=r(5680);let ChatLoader=()=>a.jsx("div",{className:"group border-b border-black/10 bg-gray-50 text-gray-800 dark:border-gray-900/50 dark:bg-[#444654] dark:text-gray-100",style:{overflowWrap:"anywhere"},children:(0,a.jsxs)("div",{className:"m-auto flex gap-4 p-4 text-base md:max-w-2xl md:gap-6 md:py-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:[a.jsx("div",{className:"min-w-[40px] items-end",children:a.jsx(l.Z,{size:30,style:{transform:"rotate(45deg)",color:"goldenrod"}})}),a.jsx("span",{className:"animate-pulse cursor-default mt-1",children:"▍"})]})})},4020:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{J:()=>b});var l=r(997),s=r(2344),n=r(4296),o=r(3368),i=r(7250),d=r(6689),c=r(1377),u=r(8071),m=r(8512),p=r(8097),x=r(5830),h=r(700),g=r(6809),f=r(9832),v=e([x,h,g,f]);[x,h,g,f]=v.then?(await v)():v;let b=(0,d.memo)(({message:e,messageIndex:t,onEdit:r})=>{let{t:a}=(0,c.useTranslation)("chat"),{state:{selectedConversation:v,conversations:b,currentMessage:y,messageIsStreaming:w},dispatch:k}=(0,d.useContext)(m.default),[j,C]=(0,d.useState)(!1),[N,S]=(0,d.useState)(!1),[E,I]=(0,d.useState)(e.content),[P,O]=(0,d.useState)(!1),_=(0,d.useRef)(null),handleEditMessage=()=>{e.content!=E&&v&&r&&r({...e,content:E}),C(!1)};return(0,d.useEffect)(()=>{I(e.content)},[e.content]),(0,d.useEffect)(()=>{_.current&&(_.current.style.height="inherit",_.current.style.height=`${_.current.scrollHeight}px`)},[j]),l.jsx("div",{className:`group md:px-4 ${"assistant"===e.role?"border-b border-black/10 bg-gray-50 text-gray-800 dark:border-gray-900/50 dark:bg-[#444654] dark:text-gray-100":"border-b border-black/10 bg-white text-gray-800 dark:border-gray-900/50 dark:bg-[#343541] dark:text-gray-100"}`,style:{overflowWrap:"anywhere"},children:(0,l.jsxs)("div",{className:"relative m-auto flex p-4 text-base md:max-w-2xl md:gap-6 md:py-6 lg:max-w-2xl lg:px-0 xl:max-w-3xl",children:[l.jsx("div",{className:"min-w-[40px] text-right font-bold",children:"assistant"===e.role?l.jsx("img",{src:"IconRobot.ico",alt:"Assistant",width:25,height:25}):l.jsx("img",{src:"IconUser.ico",alt:"User",width:25,height:25})}),l.jsx("div",{className:"prose mt-[-2px] w-full dark:prose-invert",children:"user"===e.role?(0,l.jsxs)("div",{className:"flex w-full",children:[j?(0,l.jsxs)("div",{className:"flex w-full flex-col",children:[l.jsx("textarea",{ref:_,className:"w-full resize-none whitespace-pre-wrap border-none dark:bg-[#343541]",value:E,onChange:e=>{I(e.target.value),_.current&&(_.current.style.height="inherit",_.current.style.height=`${_.current.scrollHeight}px`)},onKeyDown:e=>{"Enter"!==e.key||N||e.shiftKey||(e.preventDefault(),handleEditMessage())},onCompositionStart:()=>S(!0),onCompositionEnd:()=>S(!1),style:{fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",padding:"0",margin:"0",overflow:"hidden"}}),(0,l.jsxs)("div",{className:"mt-10 flex justify-center space-x-4",children:[l.jsx("button",{className:"h-[40px] rounded-md bg-blue-500 px-4 py-1 text-sm font-medium text-white enabled:hover:bg-blue-600 disabled:opacity-50",onClick:handleEditMessage,disabled:E.trim().length<=0,children:a("Save & Submit")}),l.jsx("button",{className:"h-[40px] rounded-md border border-neutral-300 px-4 py-1 text-sm font-medium text-neutral-700 hover:bg-neutral-100 dark:border-neutral-700 dark:text-neutral-300 dark:hover:bg-neutral-800",onClick:()=>{I(e.content),C(!1)},children:a("Cancel")})]})]}):l.jsx("div",{className:"prose whitespace-pre-wrap dark:prose-invert flex-1",children:e.content}),!j&&(0,l.jsxs)("div",{className:"md:-mr-8 ml-1 md:ml-0 flex flex-col md:flex-row gap-4 md:gap-1 items-center md:items-start justify-end md:justify-start",children:[l.jsx("button",{className:"invisible group-hover:visible focus:visible text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{C(!j)},children:l.jsx(s.Z,{size:20})}),l.jsx("button",{className:"invisible group-hover:visible focus:visible text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{if(!v)return;let{messages:t}=v,r=t.findIndex(t=>t===e);if(r<0)return;r<t.length-1&&"assistant"===t[r+1].role?t.splice(r,2):t.splice(r,1);let a={...v,messages:t},{single:l,all:s}=(0,u.X1)(a,b);k({field:"selectedConversation",value:l}),k({field:"conversations",value:s})},children:l.jsx(n.Z,{size:20})})]})]}):(0,l.jsxs)("div",{className:"flex flex-row",children:[l.jsx(x.s,{className:"prose dark:prose-invert flex-1",remarkPlugins:[g.default,f.default],rehypePlugins:[h.default],components:{code({node:e,inline:t,className:r,children:a,...s}){if(a.length){if("▍"==a[0])return l.jsx("span",{className:"animate-pulse cursor-default mt-1",children:"▍"});a[0]=a[0].replace("`▍`","▍")}let n=/language-(\w+)/.exec(r||"");return t?l.jsx("code",{className:r,...s,children:a}):l.jsx(p.d,{language:n&&n[1]||"",value:String(a).replace(/\n$/,""),...s},Math.random())},table:({children:e})=>l.jsx("table",{className:"border-collapse border border-black px-3 py-1 dark:border-white",children:e}),th:({children:e})=>l.jsx("th",{className:"break-words border border-black bg-gray-500 px-3 py-1 text-white dark:border-white",children:e}),td:({children:e})=>l.jsx("td",{className:"break-words border border-black px-3 py-1 dark:border-white",children:e})},children:`${e.content}${w&&t==(v?.messages.length??0)-1?"`▍`":""}`}),l.jsx("div",{className:"md:-mr-8 ml-1 md:ml-0 flex flex-col md:flex-row gap-4 md:gap-1 items-center md:items-start justify-end md:justify-start",children:P?l.jsx(o.Z,{size:20,className:"text-green-500 dark:text-green-400"}):l.jsx("button",{className:"invisible group-hover:visible focus:visible text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText(e.content).then(()=>{O(!0),setTimeout(()=>{O(!1)},2e3)})},children:l.jsx(i.Z,{size:20})})})]})})]})})});b.displayName="ChatMessage",a()}catch(e){a(e)}})},3530:(e,t,r)=>{r.d(t,{Y:()=>ErrorMessageDiv});var a=r(997),l=r(2110);let ErrorMessageDiv=({error:e})=>(0,a.jsxs)("div",{className:"mx-6 flex h-full flex-col items-center justify-center text-red-500",children:[a.jsx("div",{className:"mb-5",children:a.jsx(l.Z,{size:36})}),a.jsx("div",{className:"mb-3 text-2xl font-medium",children:e.title}),e.messageLines.map((e,t)=>(0,a.jsxs)("div",{className:"text-center",children:[" ",e," "]},t)),a.jsx("div",{className:"mt-4 text-xs opacity-50 dark:text-red-400",children:e.code?(0,a.jsxs)("i",{children:["Code: ",e.code]}):""})]})},8243:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{m:()=>o});var l=r(6689),s=r(4020),n=e([s]);s=(n.then?(await n)():n)[0];let o=(0,l.memo)(s.J,(e,t)=>e.message.content===t.message.content);a()}catch(e){a(e)}})},8731:(e,t,r)=>{r.d(t,{q:()=>ModelSelect});var a=r(997),l=r(3509),s=r(6689),n=r(1377),o=r(8512);let ModelSelect=()=>{let{t:e}=(0,n.useTranslation)("chat"),{state:{selectedConversation:t,models:r,defaultModelId:i},handleUpdateConversation:d,dispatch:c}=(0,s.useContext)(o.default);return(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("label",{className:"mb-2 text-left text-neutral-700 dark:text-neutral-400",children:e("Model")}),a.jsx("div",{className:"w-full rounded-lg border border-neutral-200 bg-transparent pr-2 text-neutral-900 dark:border-neutral-600 dark:text-white",children:a.jsx("select",{className:"w-full bg-transparent p-2",placeholder:e("Select a model")||"",value:t?.model?.id||i,onChange:e=>{t&&d(t,{key:"model",value:r.find(t=>t.id===e.target.value)})},children:r.map(e=>a.jsx("option",{value:e.id,className:"dark:bg-[#343541] dark:text-white",children:e.id===i?`Default (${e.name})`:e.name},e.id))})}),a.jsx("div",{className:"w-full mt-3 text-left text-neutral-700 dark:text-neutral-400 flex items-center",children:(0,a.jsxs)("a",{href:"https://platform.openai.com/account/usage",target:"_blank",className:"flex items-center",children:[a.jsx(l.Z,{size:18,className:"inline mr-1"}),e("View Account Usage")]})})]})}},5636:(e,t,r)=>{r.d(t,{t:()=>PromptList});var a=r(997);let PromptList=({prompts:e,activePromptIndex:t,onSelect:r,onMouseOver:l,promptListRef:s})=>a.jsx("ul",{ref:s,className:"z-10 max-h-52 w-full overflow-scroll rounded border border-black/10 bg-white shadow-[0_0_10px_rgba(0,0,0,0.10)] dark:border-neutral-500 dark:bg-[#343541] dark:text-white dark:shadow-[0_0_15px_rgba(0,0,0,0.10)]",children:e.map((e,s)=>a.jsx("li",{className:`${s===t?"bg-gray-200 dark:bg-[#202123] dark:text-black":""} cursor-pointer px-3 py-2 text-sm text-black dark:text-white`,onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},onMouseEnter:()=>l(s),children:e.name},e.id))})},5550:(e,t,r)=>{r.d(t,{r:()=>SystemPrompt});var a=r(997),l=r(6689),s=r(1377),n=r(1879),o=r(5636),i=r(5640);let SystemPrompt=({conversation:e,prompts:t,onChangePrompt:r})=>{let{t:d}=(0,s.useTranslation)("chat"),[c,u]=(0,l.useState)(""),[m,p]=(0,l.useState)(0),[x,h]=(0,l.useState)(!1),[g,f]=(0,l.useState)(""),[v,b]=(0,l.useState)([]),[y,w]=(0,l.useState)(!1),k=(0,l.useRef)(null),j=(0,l.useRef)(null),C=t.filter(e=>e.name.toLowerCase().includes(g.toLowerCase())),handleInitModal=()=>{let e=C[m];u(t=>{let r=t?.replace(/\/\w*$/,e.content);return r}),handlePromptSelect(e),h(!1)},parseVariables=e=>{let t;let r=/{{(.*?)}}/g,a=[];for(;null!==(t=r.exec(e));)a.push(t[1]);return a},N=(0,l.useCallback)(e=>{let t=e.match(/\/\w*$/);t?(h(!0),f(t[0].slice(1))):(h(!1),f(""))},[]),handlePromptSelect=e=>{let t=parseVariables(e.content);if(b(t),t.length>0)w(!0);else{let t=c?.replace(/\/\w*$/,e.content);u(t),r(t),N(e.content)}};return(0,l.useEffect)(()=>{k&&k.current&&(k.current.style.height="inherit",k.current.style.height=`${k.current?.scrollHeight}px`)},[c]),(0,l.useEffect)(()=>{e.prompt?u(e.prompt):u(n.cl)},[e]),(0,l.useEffect)(()=>{let handleOutsideClick=e=>{j.current&&!j.current.contains(e.target)&&h(!1)};return window.addEventListener("click",handleOutsideClick),()=>{window.removeEventListener("click",handleOutsideClick)}},[]),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("label",{className:"mb-2 text-left text-neutral-700 dark:text-neutral-400",children:d("System Prompt")}),a.jsx("textarea",{ref:k,className:"w-full rounded-lg border border-neutral-200 bg-transparent px-4 py-3 text-neutral-900 dark:border-neutral-600 dark:text-neutral-100",style:{resize:"none",bottom:`${k?.current?.scrollHeight}px`,maxHeight:"300px",overflow:`${k.current&&k.current.scrollHeight>400?"auto":"hidden"}`},placeholder:d('Enter a prompt or type "/" to select a prompt...')||"",value:d(c)||"",rows:1,onChange:t=>{let a=t.target.value,l=e.model.maxLength;if(a.length>l){alert(d("Prompt limit is {{maxLength}} characters. You have entered {{valueLength}} characters.",{maxLength:l,valueLength:a.length}));return}u(a),N(a),a.length>0&&r(a)},onKeyDown:e=>{x&&("ArrowDown"===e.key?(e.preventDefault(),p(e=>e<t.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),p(e=>e>0?e-1:e)):"Tab"===e.key?(e.preventDefault(),p(e=>e<t.length-1?e+1:0)):"Enter"===e.key?(e.preventDefault(),handleInitModal()):"Escape"===e.key?(e.preventDefault(),h(!1)):p(0))}}),x&&C.length>0&&a.jsx("div",{children:a.jsx(o.t,{activePromptIndex:m,prompts:C,onSelect:handleInitModal,onMouseOver:p,promptListRef:j})}),y&&a.jsx(i.g,{prompt:t[m],variables:v,onSubmit:e=>{let t=c?.replace(/{{(.*?)}}/g,(t,r)=>{let a=v.indexOf(r);return e[a]});u(t),r(t),k&&k.current&&k.current.focus()},onClose:()=>w(!1)})]})}},4146:(e,t,r)=>{r.d(t,{$:()=>TemperatureSlider});var a=r(997),l=r(6689),s=r(1377),n=r(1879),o=r(8512);let TemperatureSlider=({label:e,onChangeTemperature:t})=>{let{state:{conversations:r}}=(0,l.useContext)(o.default),i=r[r.length-1],[d,c]=(0,l.useState)(i?.temperature??n.Ar),{t:u}=(0,s.useTranslation)("chat");return(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("label",{className:"mb-2 text-left text-neutral-700 dark:text-neutral-400",children:e}),a.jsx("span",{className:"text-[12px] text-black/50 dark:text-white/50 text-sm",children:u("Higher values like 0.8 will make the output more random, while lower values like 0.2 will make it more focused and deterministic.")}),a.jsx("span",{className:"mt-2 mb-1 text-center text-neutral-900 dark:text-neutral-100",children:d.toFixed(1)}),a.jsx("input",{className:"cursor-pointer",type:"range",min:0,max:1,step:.1,value:d,defaultValue:.5,onChange:e=>{let r=parseFloat(e.target.value);c(r),t(r)}}),(0,a.jsxs)("ul",{className:"w mt-2 pb-8 flex justify-between px-[24px] text-neutral-900 dark:text-neutral-100",children:[a.jsx("li",{className:"flex justify-center",children:a.jsx("span",{className:"absolute",children:u("Precise")})}),a.jsx("li",{className:"flex justify-center",children:a.jsx("span",{className:"absolute",children:u("Neutral")})}),a.jsx("li",{className:"flex justify-center",children:a.jsx("span",{className:"absolute",children:u("Creative")})})]})]})}},5640:(e,t,r)=>{r.d(t,{g:()=>VariableModal});var a=r(997),l=r(6689);let VariableModal=({prompt:e,variables:t,onSubmit:r,onClose:s})=>{let[n,o]=(0,l.useState)(t.map(e=>({key:e,value:""})).filter((e,t,r)=>r.findIndex(t=>t.key===e.key)===t)),i=(0,l.useRef)(null),d=(0,l.useRef)(null),handleChange=(e,t)=>{o(r=>{let a=[...r];return a[e].value=t,a})},handleSubmit=()=>{if(n.some(e=>""===e.value)){alert("Please fill out all variables");return}r(n.map(e=>e.value)),s()};return(0,l.useEffect)(()=>{let handleOutsideClick=e=>{i.current&&!i.current.contains(e.target)&&s()};return window.addEventListener("click",handleOutsideClick),()=>{window.removeEventListener("click",handleOutsideClick)}},[s]),(0,l.useEffect)(()=>{d.current&&d.current.focus()},[]),a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key&&s():(e.preventDefault(),handleSubmit())},children:(0,a.jsxs)("div",{ref:i,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:bg-[#202123] sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[a.jsx("div",{className:"mb-4 text-xl font-bold text-black dark:text-neutral-200",children:e.name}),a.jsx("div",{className:"mb-4 text-sm italic text-black dark:text-neutral-200",children:e.description}),n.map((e,t)=>(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("div",{className:"mb-2 text-sm font-bold text-neutral-200",children:e.key}),a.jsx("textarea",{ref:0===t?d:void 0,className:"mt-1 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",style:{resize:"none"},placeholder:`Enter a value for ${e.key}...`,value:e.value,onChange:e=>handleChange(t,e.target.value),rows:3})]},t)),a.jsx("button",{className:"mt-6 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:handleSubmit,children:"Submit"})]})})}},9366:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(6689);let l=(0,a.createContext)(void 0),s=l},2070:(e,t,r)=>{r.d(t,{E:()=>a});let a={searchTerm:"",filteredConversations:[]}},2669:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{W:()=>Chatbar});var l=r(997),s=r(6689),n=r(1377),o=r(2953),i=r(1879),d=r(8071),c=r(8551),u=r(205),m=r(1938),p=r(8512),x=r(7379),h=r(8483),g=r(4142),f=r(8892),v=r(9366),b=r(2070),y=r(6555),w=e([u,m,h,f,y]);[u,m,h,f,y]=w.then?(await w)():w;let Chatbar=()=>{let{t:e}=(0,n.useTranslation)("sidebar"),t=(0,o.L)({initialState:b.E}),{state:{conversations:r,showChatbar:a,defaultModelId:w,folders:k,pluginKeys:j},dispatch:C,handleCreateFolder:N,handleNewConversation:S,handleUpdateConversation:E}=(0,s.useContext)(p.default),{state:{searchTerm:I,filteredConversations:P},dispatch:O}=t,_=(0,s.useCallback)(e=>{C({field:"apiKey",value:e}),localStorage.setItem("apiKey",e)},[C]);return(0,s.useEffect)(()=>{I?O({field:"filteredConversations",value:r.filter(e=>{let t=e.name.toLocaleLowerCase()+" "+e.messages.map(e=>e.content).join(" ");return t.toLowerCase().includes(I.toLowerCase())})}):O({field:"filteredConversations",value:r})},[I,r]),l.jsx(v.Z.Provider,{value:{...t,handleDeleteConversation:t=>{let a=r.filter(e=>e.id!==t.id);C({field:"conversations",value:a}),O({field:"searchTerm",value:""}),(0,d.fB)(a),a.length>0?(C({field:"selectedConversation",value:a[a.length-1]}),(0,d.m7)(a[a.length-1])):(w&&C({field:"selectedConversation",value:{id:(0,y.v4)(),name:e("New Conversation"),messages:[],model:m.MU[w],prompt:i.cl,temperature:i.Ar,folderId:null}}),localStorage.removeItem("selectedConversation"))},handleClearConversations:()=>{w&&C({field:"selectedConversation",value:{id:(0,y.v4)(),name:e("New Conversation"),messages:[],model:m.MU[w],prompt:i.cl,temperature:i.Ar,folderId:null}}),C({field:"conversations",value:[]}),localStorage.removeItem("conversationHistory"),localStorage.removeItem("selectedConversation");let t=k.filter(e=>"chat"!==e.type);C({field:"folders",value:t}),(0,c._)(t)},handleImportConversations:e=>{let{history:t,folders:r,prompts:a}=(0,u.dk)(e);C({field:"conversations",value:t}),C({field:"selectedConversation",value:t[t.length-1]}),C({field:"folders",value:r}),C({field:"prompts",value:a}),window.location.reload()},handleExportData:()=>{(0,u.u1)()},handlePluginKeyChange:e=>{if(j.some(t=>t.pluginId===e.pluginId)){let t=j.map(t=>t.pluginId===e.pluginId?e:t);C({field:"pluginKeys",value:t}),localStorage.setItem("pluginKeys",JSON.stringify(t))}else C({field:"pluginKeys",value:[...j,e]}),localStorage.setItem("pluginKeys",JSON.stringify([...j,e]))},handleClearPluginKey:e=>{let t=j.filter(t=>t.pluginId!==e.pluginId);if(0===t.length){C({field:"pluginKeys",value:[]}),localStorage.removeItem("pluginKeys");return}C({field:"pluginKeys",value:t}),localStorage.setItem("pluginKeys",JSON.stringify(t))},handleApiKeyChange:_},children:l.jsx(f.Z,{side:"left",isOpen:a,addItemButtonTitle:e("New chat"),itemComponent:l.jsx(g.o,{conversations:P}),folderComponent:l.jsx(x.O,{searchTerm:I}),items:P,searchTerm:I,handleSearchTerm:e=>O({field:"searchTerm",value:e}),toggleOpen:()=>{C({field:"showChatbar",value:!a}),localStorage.setItem("showChatbar",JSON.stringify(!a))},handleCreateItem:S,handleCreateFolder:()=>N(e("New folder"),"chat"),handleDrop:e=>{if(e.dataTransfer){let t=JSON.parse(e.dataTransfer.getData("conversation"));E(t,{key:"folderId",value:0}),O({field:"searchTerm",value:""}),e.target.style.background="none"}},footerComponent:l.jsx(h.M,{})})})};a()}catch(e){a(e)}})},7379:(e,t,r)=>{r.d(t,{O:()=>ChatFolders});var a=r(997),l=r(6689),s=r(8512),n=r(9208),o=r(7239);let ChatFolders=({searchTerm:e})=>{let{state:{folders:t,conversations:r},handleUpdateConversation:i}=(0,l.useContext)(s.default),handleDrop=(e,t)=>{if(e.dataTransfer){let r=JSON.parse(e.dataTransfer.getData("conversation"));i(r,{key:"folderId",value:t.id})}},ChatFolders=e=>r&&r.filter(e=>e.folderId).map((t,r)=>{if(t.folderId===e.id)return a.jsx("div",{className:"ml-5 gap-2 border-l pl-2",children:a.jsx(o.S,{conversation:t})},r)});return a.jsx("div",{className:"flex w-full flex-col pt-2",children:t.filter(e=>"chat"===e.type).sort((e,t)=>e.name.localeCompare(t.name)).map((t,r)=>a.jsx(n.Z,{searchTerm:e,currentFolder:t,handleDrop:handleDrop,folderComponent:ChatFolders(t)},r))})}},8483:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{M:()=>ChatbarSettings});var l=r(997),s=r(4213),n=r(1383),o=r(6689),i=r(1377),d=r(8512),c=r(3304),u=r(5605),m=r(5812),p=r(6269),x=r(9366),h=r(8294),g=r(1004),f=e([g]);g=(f.then?(await f)():f)[0];let ChatbarSettings=()=>{let{t:e}=(0,i.useTranslation)("sidebar"),[t,r]=(0,o.useState)(!1),{state:{apiKey:a,lightMode:f,serverSideApiKeyIsSet:v,serverSidePluginKeysSet:b,conversations:y},dispatch:w}=(0,o.useContext)(d.default),{handleClearConversations:k,handleImportConversations:j,handleExportData:C,handleApiKeyChange:N}=(0,o.useContext)(x.Z);return(0,l.jsxs)("div",{className:"flex flex-col items-center space-y-1 border-t border-white/20 pt-1 text-sm",children:[y.length>0?l.jsx(h.h,{onClearConversations:k}):null,l.jsx(u.b,{onImport:j}),l.jsx(p.f,{text:e("Export data"),icon:l.jsx(s.Z,{size:18}),onClick:()=>C()}),l.jsx(p.f,{text:e("Settings"),icon:l.jsx(n.Z,{size:18}),onClick:()=>r(!0)}),v?null:l.jsx(m.s,{apiKey:a,onApiKeyChange:N}),b?null:l.jsx(g.A,{}),l.jsx(c.O,{open:t,onClose:()=>{r(!1)}})]})};a()}catch(e){a(e)}})},8294:(e,t,r)=>{r.d(t,{h:()=>ClearConversations});var a=r(997),l=r(4296),s=r(3368),n=r(520),o=r(6689),i=r(1377),d=r(6269);let ClearConversations=({onClearConversations:e})=>{let[t,r]=(0,o.useState)(!1),{t:c}=(0,i.useTranslation)("sidebar"),handleClearConversations=()=>{e(),r(!1)};return t?(0,a.jsxs)("div",{className:"flex w-full cursor-pointer items-center rounded-lg py-3 px-3 hover:bg-gray-500/10",children:[a.jsx(l.Z,{size:18}),a.jsx("div",{className:"ml-3 flex-1 text-left text-[12.5px] leading-3 text-white",children:c("Are you sure?")}),(0,a.jsxs)("div",{className:"flex w-[40px]",children:[a.jsx(s.Z,{className:"ml-auto mr-1 min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),handleClearConversations()}}),a.jsx(n.Z,{className:"ml-auto min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),r(!1)}})]})]}):a.jsx(d.f,{text:c("Clear conversations"),icon:a.jsx(l.Z,{size:18}),onClick:()=>r(!0)})}},7239:(e,t,r)=>{r.d(t,{S:()=>ConversationComponent});var a=r(997),l=r(3311),s=r(3368),n=r(520),o=r(1373),i=r(4296),d=r(6689),c=r(8512),u=r(5615),m=r(9366);let ConversationComponent=({conversation:e})=>{let{state:{selectedConversation:t,messageIsStreaming:r},handleSelectConversation:p,handleUpdateConversation:x}=(0,d.useContext)(c.default),{handleDeleteConversation:h}=(0,d.useContext)(m.Z),[g,f]=(0,d.useState)(!1),[v,b]=(0,d.useState)(!1),[y,w]=(0,d.useState)(""),handleDragStart=(e,t)=>{e.dataTransfer&&e.dataTransfer.setData("conversation",JSON.stringify(t))},handleRename=e=>{y.trim().length>0&&(x(e,{key:"name",value:y}),w(""),b(!1))};return(0,d.useEffect)(()=>{v?f(!1):g&&b(!1)},[v,g]),(0,a.jsxs)("div",{className:"relative flex items-center",children:[v&&t?.id===e.id?(0,a.jsxs)("div",{className:"flex w-full items-center gap-3 rounded-lg bg-[#343541]/90 p-3",children:[a.jsx(l.Z,{size:18}),a.jsx("input",{className:"mr-12 flex-1 overflow-hidden overflow-ellipsis border-neutral-400 bg-transparent text-left text-[12.5px] leading-3 text-white outline-none focus:border-neutral-100",type:"text",value:y,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),t&&handleRename(t))},autoFocus:!0})]}):(0,a.jsxs)("button",{className:`flex w-full cursor-pointer items-center gap-3 rounded-lg p-3 text-sm transition-colors duration-200 hover:bg-[#343541]/90 ${r?"disabled:cursor-not-allowed":""} ${t?.id===e.id?"bg-[#343541]/90":""}`,onClick:()=>p(e),disabled:r,draggable:"true",onDragStart:t=>handleDragStart(t,e),children:[a.jsx(l.Z,{size:18}),a.jsx("div",{className:`relative max-h-5 flex-1 overflow-hidden text-ellipsis whitespace-nowrap break-all text-left text-[12.5px] leading-3 ${t?.id===e.id?"pr-12":"pr-1"}`,children:e.name})]}),(g||v)&&t?.id===e.id&&(0,a.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[a.jsx(u.Z,{handleClick:t=>{t.stopPropagation(),g?h(e):v&&handleRename(e),f(!1),b(!1)},children:a.jsx(s.Z,{size:18})}),a.jsx(u.Z,{handleClick:e=>{e.stopPropagation(),f(!1),b(!1)},children:a.jsx(n.Z,{size:18})})]}),t?.id===e.id&&!g&&!v&&(0,a.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[a.jsx(u.Z,{handleClick:e=>{e.stopPropagation(),b(!0),t&&w(t.name)},children:a.jsx(o.Z,{size:18})}),a.jsx(u.Z,{handleClick:e=>{e.stopPropagation(),f(!0)},children:a.jsx(i.Z,{size:18})})]})]})}},4142:(e,t,r)=>{r.d(t,{o:()=>Conversations});var a=r(997),l=r(7239);let Conversations=({conversations:e})=>a.jsx("div",{className:"flex w-full flex-col gap-1",children:e.filter(e=>!e.folderId).slice().reverse().map((e,t)=>a.jsx(l.S,{conversation:e},t))})},1004:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{A:()=>PluginKeys});var l=r(997),s=r(8435),n=r(6689),o=r(7987),i=r(5449),d=r(8512),c=r(6269),u=r(9366),m=e([o]);o=(m.then?(await m)():m)[0];let PluginKeys=()=>{let{t:e}=(0,o.useTranslation)("sidebar"),{state:{pluginKeys:t}}=(0,n.useContext)(d.default),{handlePluginKeyChange:r,handleClearPluginKey:a}=(0,n.useContext)(u.Z),[m,p]=(0,n.useState)(!1),x=(0,n.useRef)(null);return(0,n.useEffect)(()=>{let handleMouseDown=e=>{x.current&&!x.current.contains(e.target)&&window.addEventListener("mouseup",handleMouseUp)},handleMouseUp=e=>{window.removeEventListener("mouseup",handleMouseUp),p(!1)};return window.addEventListener("mousedown",handleMouseDown),()=>{window.removeEventListener("mousedown",handleMouseDown)}},[]),(0,l.jsxs)(l.Fragment,{children:[l.jsx(c.f,{text:e("Plugin Keys"),icon:l.jsx(s.Z,{size:18}),onClick:()=>p(!0)}),m&&l.jsx("div",{className:"z-100 fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p(!1))},children:l.jsx("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,l.jsxs)("div",{className:"flex min-h-screen items-center justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[l.jsx("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,l.jsxs)("div",{ref:x,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:bg-[#202123] sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[l.jsx("div",{className:"mb-10 text-4xl",children:"Plugin Keys"}),(0,l.jsxs)("div",{className:"mt-6 rounded border p-4",children:[l.jsx("div",{className:"text-xl font-bold",children:"Google Search Plugin"}),l.jsx("div",{className:"mt-4 italic",children:"Please enter your Google API Key and Google CSE ID to enable the Google Search Plugin."}),l.jsx("div",{className:"mt-6 text-sm font-bold text-black dark:text-neutral-200",children:"Google API Key"}),l.jsx("input",{className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",type:"password",value:t.find(e=>e.pluginId===i.PO.GOOGLE_SEARCH)?.requiredKeys.find(e=>"GOOGLE_API_KEY"===e.key)?.value,onChange:e=>{let a=t.find(e=>e.pluginId===i.PO.GOOGLE_SEARCH);if(a){let t=a.requiredKeys.find(e=>"GOOGLE_API_KEY"===e.key);if(t){let t={...a,requiredKeys:a.requiredKeys.map(t=>"GOOGLE_API_KEY"===t.key?{...t,value:e.target.value}:t)};r(t)}}else{let t={pluginId:i.PO.GOOGLE_SEARCH,requiredKeys:[{key:"GOOGLE_API_KEY",value:e.target.value},{key:"GOOGLE_CSE_ID",value:""}]};r(t)}}}),l.jsx("div",{className:"mt-6 text-sm font-bold text-black dark:text-neutral-200",children:"Google CSE ID"}),l.jsx("input",{className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",type:"password",value:t.find(e=>e.pluginId===i.PO.GOOGLE_SEARCH)?.requiredKeys.find(e=>"GOOGLE_CSE_ID"===e.key)?.value,onChange:e=>{let a=t.find(e=>e.pluginId===i.PO.GOOGLE_SEARCH);if(a){let t=a.requiredKeys.find(e=>"GOOGLE_CSE_ID"===e.key);if(t){let t={...a,requiredKeys:a.requiredKeys.map(t=>"GOOGLE_CSE_ID"===t.key?{...t,value:e.target.value}:t)};r(t)}}else{let t={pluginId:i.PO.GOOGLE_SEARCH,requiredKeys:[{key:"GOOGLE_API_KEY",value:""},{key:"GOOGLE_CSE_ID",value:e.target.value}]};r(t)}}}),l.jsx("button",{className:"mt-6 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:()=>{let e=t.find(e=>e.pluginId===i.PO.GOOGLE_SEARCH);e&&a(e)},children:"Clear Google Search Plugin Keys"})]}),l.jsx("button",{type:"button",className:"mt-6 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:()=>p(!1),children:e("Save")})]})]})})})]})};a()}catch(e){a(e)}})},9208:(e,t,r)=>{r.d(t,{Z:()=>Folder_Folder});var a=r(997),l=r(9350),s=r(2041),n=r(3368),o=r(520),i=r(1373),d=r(4296),c=r(6689),u=r(8512),m=r(5615);let Folder_Folder=({currentFolder:e,searchTerm:t,handleDrop:r,folderComponent:p})=>{let{handleDeleteFolder:x,handleUpdateFolder:h}=(0,c.useContext)(u.default),[g,f]=(0,c.useState)(!1),[v,b]=(0,c.useState)(!1),[y,w]=(0,c.useState)(""),[k,j]=(0,c.useState)(!1),handleRename=()=>{h(e.id,y),w(""),b(!1)},dropHandler=t=>{t.dataTransfer&&(j(!0),r(t,e),t.target.style.background="none")};return(0,c.useEffect)(()=>{v?f(!1):g&&b(!1)},[v,g]),(0,c.useEffect)(()=>{t?j(!0):j(!1)},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"relative flex items-center",children:[v?(0,a.jsxs)("div",{className:"flex w-full items-center gap-3 bg-[#343541]/90 p-3",children:[k?a.jsx(l.Z,{size:18}):a.jsx(s.Z,{size:18}),a.jsx("input",{className:"mr-12 flex-1 overflow-hidden overflow-ellipsis border-neutral-400 bg-transparent text-left text-[12.5px] leading-3 text-white outline-none focus:border-neutral-100",type:"text",value:y,onChange:e=>w(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),handleRename())},autoFocus:!0})]}):(0,a.jsxs)("button",{className:"flex w-full cursor-pointer items-center gap-3 rounded-lg p-3 text-sm transition-colors duration-200 hover:bg-[#343541]/90",onClick:()=>j(!k),onDrop:e=>dropHandler(e),onDragOver:e=>{e.preventDefault()},onDragEnter:e=>{e.target.style.background="#343541"},onDragLeave:e=>{e.target.style.background="none"},children:[k?a.jsx(l.Z,{size:18}):a.jsx(s.Z,{size:18}),a.jsx("div",{className:"relative max-h-5 flex-1 overflow-hidden text-ellipsis whitespace-nowrap break-all text-left text-[12.5px] leading-3",children:e.name})]}),(g||v)&&(0,a.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[a.jsx(m.Z,{handleClick:t=>{t.stopPropagation(),g?x(e.id):v&&handleRename(),f(!1),b(!1)},children:a.jsx(n.Z,{size:18})}),a.jsx(m.Z,{handleClick:e=>{e.stopPropagation(),f(!1),b(!1)},children:a.jsx(o.Z,{size:18})})]}),!g&&!v&&(0,a.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[a.jsx(m.Z,{handleClick:t=>{t.stopPropagation(),b(!0),w(e.name)},children:a.jsx(i.Z,{size:18})}),a.jsx(m.Z,{handleClick:e=>{e.stopPropagation(),f(!0)},children:a.jsx(d.Z,{size:18})})]})]}),k?p:null]})}},8097:(e,t,r)=>{r.d(t,{d:()=>m});var a=r(997),l=r(3368),s=r(3473),n=r(6377),o=r(6689),i=r(727),d=r(4794),c=r(1377);let u={javascript:".js",python:".py",java:".java",c:".c",cpp:".cpp","c++":".cpp","c#":".cs",ruby:".rb",php:".php",swift:".swift","objective-c":".m",kotlin:".kt",typescript:".ts",go:".go",perl:".pl",rust:".rs",scala:".scala",haskell:".hs",lua:".lua",shell:".sh",sql:".sql",html:".html",css:".css"},generateRandomString=(e,t=!1)=>{let r="ABCDEFGHJKLMNPQRSTUVWXY3456789",a="";for(let t=0;t<e;t++)a+=r.charAt(Math.floor(Math.random()*r.length));return t?a.toLowerCase():a},m=(0,o.memo)(({language:e,value:t})=>{let{t:r}=(0,c.useTranslation)("markdown"),[m,p]=(0,o.useState)(!1);return(0,a.jsxs)("div",{className:"codeblock relative font-sans text-[16px]",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-1.5 px-4",children:[a.jsx("span",{className:"text-xs lowercase text-white",children:e}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("button",{className:"flex gap-1.5 items-center rounded bg-none p-1 text-xs text-white",onClick:()=>{navigator.clipboard&&navigator.clipboard.writeText&&navigator.clipboard.writeText(t).then(()=>{p(!0),setTimeout(()=>{p(!1)},2e3)})},children:[m?a.jsx(l.Z,{size:18}):a.jsx(s.Z,{size:18}),m?r("Copied!"):r("Copy code")]}),a.jsx("button",{className:"flex items-center rounded bg-none p-1 text-xs text-white",onClick:()=>{let a=u[e]||".file",l=`file-${generateRandomString(3,!0)}${a}`,s=window.prompt(r("Enter file name")||"",l);if(!s)return;let n=new Blob([t],{type:"text/plain"}),o=URL.createObjectURL(n),i=document.createElement("a");i.download=s,i.href=o,i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(o)},children:a.jsx(n.Z,{size:18})})]})]}),a.jsx(i.Prism,{language:e,style:d.oneDark,customStyle:{margin:0},children:t})]})});m.displayName="CodeBlock"},5830:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{s:()=>o});var l=r(6689),s=r(3135),n=e([s]);s=(n.then?(await n)():n)[0];let o=(0,l.memo)(s.default,(e,t)=>e.children===t.children);a()}catch(e){a(e)}})},3357:(e,t,r)=>{r.d(t,{w:()=>Navbar});var a=r(997),l=r(4313);let Navbar=({selectedConversation:e,onNewConversation:t})=>(0,a.jsxs)("nav",{className:"flex w-full justify-between bg-[#202123] py-3 px-4",children:[a.jsx("div",{className:"mr-4"}),a.jsx("div",{className:"max-w-[240px] overflow-hidden text-ellipsis whitespace-nowrap",children:e.name}),a.jsx(l.Z,{className:"cursor-pointer hover:text-neutral-400 mr-8",onClick:t})]})},1705:(e,t,r)=>{r.d(t,{Z:()=>s});var a=r(6689);let l=(0,a.createContext)(void 0),s=l},2988:(e,t,r)=>{r.d(t,{E:()=>a});let a={searchTerm:"",filteredPrompts:[]}},1247:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var l=r(997),s=r(6689),n=r(7987),o=r(2953),i=r(76),d=r(1938),c=r(8512),u=r(6330),m=r(1933),p=r(8892),x=r(1705),h=r(2988),g=r(6555),f=e([n,d,p,g]);[n,d,p,g]=f.then?(await f)():f;let __WEBPACK_DEFAULT_EXPORT__=()=>{let{t:e}=(0,n.useTranslation)("promptbar"),t=(0,o.L)({initialState:h.E}),{state:{prompts:r,defaultModelId:a,showPromptbar:f},dispatch:v,handleCreateFolder:b}=(0,s.useContext)(c.default),{state:{searchTerm:y,filteredPrompts:w},dispatch:k}=t,handleCreatePrompt=()=>{if(a){let e={id:(0,g.v4)(),name:`Prompt ${r.length+1}`,description:"",content:"",model:d.MU[a],folderId:null},t=[...r,e];v({field:"prompts",value:t}),(0,i.V)(t)}},handleUpdatePrompt=e=>{let t=r.map(t=>t.id===e.id?e:t);v({field:"prompts",value:t}),(0,i.V)(t)};return(0,s.useEffect)(()=>{y?k({field:"filteredPrompts",value:r.filter(e=>{let t=e.name.toLowerCase()+" "+e.description.toLowerCase()+" "+e.content.toLowerCase();return t.includes(y.toLowerCase())})}):k({field:"filteredPrompts",value:r})},[y,r]),l.jsx(x.Z.Provider,{value:{...t,handleCreatePrompt,handleDeletePrompt:e=>{let t=r.filter(t=>t.id!==e.id);v({field:"prompts",value:t}),(0,i.V)(t)},handleUpdatePrompt},children:l.jsx(p.Z,{side:"right",isOpen:f,addItemButtonTitle:e("New prompt"),itemComponent:l.jsx(m.j,{prompts:w.filter(e=>!e.folderId)}),folderComponent:l.jsx(u.K,{}),items:w,searchTerm:y,handleSearchTerm:e=>k({field:"searchTerm",value:e}),toggleOpen:()=>{v({field:"showPromptbar",value:!f}),localStorage.setItem("showPromptbar",JSON.stringify(!f))},handleCreateItem:handleCreatePrompt,handleCreateFolder:()=>b(e("New folder"),"prompt"),handleDrop:e=>{if(e.dataTransfer){let t=JSON.parse(e.dataTransfer.getData("prompt")),r={...t,folderId:e.target.dataset.folderId};handleUpdatePrompt(r),e.target.style.background="none"}}})})};a()}catch(e){a(e)}})},9940:(e,t,r)=>{r.d(t,{j:()=>PromptComponent});var a=r(997),l=r(5277),s=r(3368),n=r(520),o=r(4296),i=r(6689),d=r(5615),c=r(1705),u=r(1377);let PromptModal=({prompt:e,onClose:t,onUpdatePrompt:r})=>{let{t:l}=(0,u.useTranslation)("promptbar"),[s,n]=(0,i.useState)(e.name),[o,d]=(0,i.useState)(e.description),[c,m]=(0,i.useState)(e.content),p=(0,i.useRef)(null),x=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let handleMouseDown=e=>{p.current&&!p.current.contains(e.target)&&window.addEventListener("mouseup",handleMouseUp)},handleMouseUp=e=>{window.removeEventListener("mouseup",handleMouseUp),t()};return window.addEventListener("mousedown",handleMouseDown),()=>{window.removeEventListener("mousedown",handleMouseDown)}},[t]),(0,i.useEffect)(()=>{x.current?.focus()},[]),a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(r({...e,name:s,description:o,content:c.trim()}),t())},children:a.jsx("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,a.jsxs)("div",{ref:p,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:bg-[#202123] sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[a.jsx("div",{className:"text-sm font-bold text-black dark:text-neutral-200",children:l("Name")}),a.jsx("input",{ref:x,className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",placeholder:l("A name for your prompt.")||"",value:s,onChange:e=>n(e.target.value)}),a.jsx("div",{className:"mt-6 text-sm font-bold text-black dark:text-neutral-200",children:l("Description")}),a.jsx("textarea",{className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",style:{resize:"none"},placeholder:l("A description for your prompt.")||"",value:o,onChange:e=>d(e.target.value),rows:3}),a.jsx("div",{className:"mt-6 text-sm font-bold text-black dark:text-neutral-200",children:l("Prompt")}),a.jsx("textarea",{className:"mt-2 w-full rounded-lg border border-neutral-500 px-4 py-2 text-neutral-900 shadow focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-[#40414F] dark:text-neutral-100",style:{resize:"none"},placeholder:l("Prompt content. Use {{}} to denote a variable. Ex: {{name}} is a {{adjective}} {{noun}}")||"",value:c,onChange:e=>m(e.target.value),rows:10}),a.jsx("button",{type:"button",className:"w-full px-4 py-2 mt-6 border rounded-lg shadow border-neutral-500 text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:()=>{let a={...e,name:s,description:o,content:c.trim()};r(a),t()},children:l("Save")})]})]})})})},PromptComponent=({prompt:e})=>{let{dispatch:t,handleUpdatePrompt:r,handleDeletePrompt:u}=(0,i.useContext)(c.Z),[m,p]=(0,i.useState)(!1),[x,h]=(0,i.useState)(!1),[g,f]=(0,i.useState)(!1),[v,b]=(0,i.useState)(""),handleDragStart=(e,t)=>{e.dataTransfer&&e.dataTransfer.setData("prompt",JSON.stringify(t))};return(0,i.useEffect)(()=>{g?h(!1):x&&f(!1)},[g,x]),(0,a.jsxs)("div",{className:"relative flex items-center",children:[(0,a.jsxs)("button",{className:"flex w-full cursor-pointer items-center gap-3 rounded-lg p-3 text-sm transition-colors duration-200 hover:bg-[#343541]/90",draggable:"true",onClick:e=>{e.stopPropagation(),p(!0)},onDragStart:t=>handleDragStart(t,e),onMouseLeave:()=>{h(!1),f(!1),b("")},children:[a.jsx(l.Z,{size:18}),a.jsx("div",{className:"relative max-h-5 flex-1 overflow-hidden text-ellipsis whitespace-nowrap break-all pr-4 text-left text-[12.5px] leading-3",children:e.name})]}),(x||g)&&(0,a.jsxs)("div",{className:"absolute right-1 z-10 flex text-gray-300",children:[a.jsx(d.Z,{handleClick:r=>{r.stopPropagation(),x&&(u(e),t({field:"searchTerm",value:""})),h(!1)},children:a.jsx(s.Z,{size:18})}),a.jsx(d.Z,{handleClick:e=>{e.stopPropagation(),h(!1)},children:a.jsx(n.Z,{size:18})})]}),!x&&!g&&a.jsx("div",{className:"absolute right-1 z-10 flex text-gray-300",children:a.jsx(d.Z,{handleClick:e=>{e.stopPropagation(),h(!0)},children:a.jsx(o.Z,{size:18})})}),m&&a.jsx(PromptModal,{prompt:e,onClose:()=>p(!1),onUpdatePrompt:e=>{r(e),t({field:"searchTerm",value:""})}})]})}},6330:(e,t,r)=>{r.d(t,{K:()=>PromptFolders});var a=r(997),l=r(6689),s=r(8512),n=r(9208),o=r(9940),i=r(1705);let PromptFolders=()=>{let{state:{folders:e}}=(0,l.useContext)(s.default),{state:{searchTerm:t,filteredPrompts:r},handleUpdatePrompt:d}=(0,l.useContext)(i.Z),handleDrop=(e,t)=>{if(e.dataTransfer){let r=JSON.parse(e.dataTransfer.getData("prompt")),a={...r,folderId:t.id};d(a)}},PromptFolders=e=>r.filter(e=>e.folderId).map((t,r)=>{if(t.folderId===e.id)return a.jsx("div",{className:"ml-5 gap-2 border-l pl-2",children:a.jsx(o.j,{prompt:t})},r)});return a.jsx("div",{className:"flex w-full flex-col pt-2",children:e.filter(e=>"prompt"===e.type).sort((e,t)=>e.name.localeCompare(t.name)).map((e,r)=>a.jsx(n.Z,{searchTerm:t,currentFolder:e,handleDrop:handleDrop,folderComponent:PromptFolders(e)},r))})}},1933:(e,t,r)=>{r.d(t,{j:()=>Prompts});var a=r(997),l=r(9940);let Prompts=({prompts:e})=>a.jsx("div",{className:"flex w-full flex-col gap-1",children:e.slice().reverse().map((e,t)=>a.jsx(l.j,{prompt:e},t))})},6857:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l.Z});var l=r(1247),s=e([l]);l=(s.then?(await s)():s)[0],a()}catch(e){a(e)}})},8321:(e,t,r)=>{r.d(t,{Z:()=>Search_Search});var a=r(997),l=r(520),s=r(1377);let Search_Search=({placeholder:e,searchTerm:t,onSearch:r})=>{let{t:n}=(0,s.useTranslation)("sidebar");return(0,a.jsxs)("div",{className:"relative flex items-center",children:[a.jsx("input",{className:"w-full flex-1 rounded-md border border-neutral-600 bg-[#202123] px-4 py-3 pr-10 text-[14px] leading-3 text-white",type:"text",placeholder:n(e)||"",value:t,onChange:e=>{r(e.target.value)}}),t&&a.jsx(l.Z,{className:"absolute right-4 cursor-pointer text-neutral-300 hover:text-neutral-400",size:18,onClick:()=>{r("")}})]})}},5605:(e,t,r)=>{r.d(t,{b:()=>Import});var a=r(997),l=r(9075),s=r(1377),n=r(6269);let Import=({onImport:e})=>{let{t}=(0,s.useTranslation)("sidebar");return(0,a.jsxs)(a.Fragment,{children:[a.jsx("input",{id:"import-file",className:"sr-only",tabIndex:-1,type:"file",accept:".json",onChange:t=>{if(!t.target.files?.length)return;let r=t.target.files[0],a=new FileReader;a.onload=t=>{e(JSON.parse(t.target?.result))},a.readAsText(r)}}),a.jsx(n.f,{text:t("Import data"),icon:a.jsx(l.Z,{size:18}),onClick:()=>{let e=document.querySelector("#import-file");e&&e.click()}})]})}},5812:(e,t,r)=>{r.d(t,{s:()=>Key});var a=r(997),l=r(8435),s=r(3368),n=r(520),o=r(6689),i=r(1377),d=r(6269);let Key=({apiKey:e,onApiKeyChange:t})=>{let{t:r}=(0,i.useTranslation)("sidebar"),[c,u]=(0,o.useState)(!1),[m,p]=(0,o.useState)(e),x=(0,o.useRef)(null),handleUpdateKey=e=>{t(e.trim()),u(!1)};return(0,o.useEffect)(()=>{c&&x.current?.focus()},[c]),c?(0,a.jsxs)("div",{className:"duration:200 flex w-full cursor-pointer items-center rounded-md py-3 px-3 transition-colors hover:bg-gray-500/10",children:[a.jsx(l.Z,{size:18}),a.jsx("input",{ref:x,className:"ml-2 h-[20px] flex-1 overflow-hidden overflow-ellipsis border-b border-neutral-400 bg-transparent pr-1 text-[12.5px] leading-3 text-left text-white outline-none focus:border-neutral-100",type:"password",value:m,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),handleUpdateKey(m))},placeholder:r("API Key")||"API Key"}),(0,a.jsxs)("div",{className:"flex w-[40px]",children:[a.jsx(s.Z,{className:"ml-auto min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:e=>{e.stopPropagation(),handleUpdateKey(m)}}),a.jsx(n.Z,{className:"ml-auto min-w-[20px] text-neutral-400 hover:text-neutral-100",size:18,onClick:t=>{t.stopPropagation(),u(!1),p(e)}})]})]}):a.jsx(d.f,{text:r("OpenAI API Key"),icon:a.jsx(l.Z,{size:18}),onClick:()=>u(!0)})}},3304:(e,t,r)=>{r.d(t,{O:()=>SettingDialog});var a=r(997),l=r(6689),s=r(1377),n=r(2953),o=r(8235),i=r(8512);let SettingDialog=({open:e,onClose:t})=>{let{t:r}=(0,s.useTranslation)("settings"),d=(0,o.G)(),{state:c,dispatch:u}=(0,n.L)({initialState:d}),{dispatch:m}=(0,l.useContext)(i.default),p=(0,l.useRef)(null);(0,l.useEffect)(()=>{let handleMouseDown=e=>{p.current&&!p.current.contains(e.target)&&window.addEventListener("mouseup",handleMouseUp)},handleMouseUp=e=>{window.removeEventListener("mouseup",handleMouseUp),t()};return window.addEventListener("mousedown",handleMouseDown),()=>{window.removeEventListener("mousedown",handleMouseDown)}},[t]);let handleSave=()=>{m({field:"lightMode",value:c.theme}),(0,o.z)(c)};return e?a.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:a.jsx("div",{className:"fixed inset-0 z-10 overflow-hidden",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[a.jsx("div",{className:"hidden sm:inline-block sm:h-screen sm:align-middle","aria-hidden":"true"}),(0,a.jsxs)("div",{ref:p,className:"dark:border-netural-400 inline-block max-h-[400px] transform overflow-y-auto rounded-lg border border-gray-300 bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all dark:bg-[#202123] sm:my-8 sm:max-h-[600px] sm:w-full sm:max-w-lg sm:p-6 sm:align-middle",role:"dialog",children:[a.jsx("div",{className:"text-lg pb-4 font-bold text-black dark:text-neutral-200",children:r("Settings")}),a.jsx("div",{className:"text-sm font-bold mb-2 text-black dark:text-neutral-200",children:r("Theme")}),(0,a.jsxs)("select",{className:"w-full cursor-pointer bg-transparent p-2 text-neutral-700 dark:text-neutral-200",value:c.theme,onChange:e=>u({field:"theme",value:e.target.value}),children:[a.jsx("option",{value:"dark",children:r("Dark mode")}),a.jsx("option",{value:"light",children:r("Light mode")})]}),a.jsx("button",{type:"button",className:"w-full px-4 py-2 mt-6 border rounded-lg shadow border-neutral-500 text-neutral-900 hover:bg-neutral-100 focus:outline-none dark:border-neutral-800 dark:border-opacity-50 dark:bg-white dark:text-black dark:hover:bg-neutral-300",onClick:()=>{handleSave(),t()},children:r("Save")})]})]})})}):a.jsx(a.Fragment,{})}},4722:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var l=r(997),s=r(4313),n=r(8911),o=r(2009),i=r(7987),d=r(5873),c=r(8321),u=e([i]);i=(u.then?(await u)():u)[0];let __WEBPACK_DEFAULT_EXPORT__=({isOpen:e,addItemButtonTitle:t,side:r,items:a,itemComponent:u,folderComponent:m,footerComponent:p,searchTerm:x,handleSearchTerm:h,toggleOpen:g,handleCreateItem:f,handleCreateFolder:v,handleDrop:b})=>{let{t:y}=(0,i.useTranslation)("promptbar");return e?(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:`fixed top-0 ${r}-0 z-40 flex h-full w-[260px] flex-none flex-col space-y-2 bg-[#202123] p-2 text-[14px] transition-all sm:relative sm:top-0`,children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsxs)("button",{className:"text-sidebar flex w-[190px] flex-shrink-0 cursor-pointer select-none items-center gap-3 rounded-md border border-white/20 p-3 text-white transition-colors duration-200 hover:bg-gray-500/10",onClick:()=>{f(),h("")},children:[l.jsx(s.Z,{size:16}),t]}),l.jsx("button",{className:"ml-2 flex flex-shrink-0 cursor-pointer items-center gap-3 rounded-md border border-white/20 p-3 text-sm text-white transition-colors duration-200 hover:bg-gray-500/10",onClick:v,children:l.jsx(n.Z,{size:16})})]}),l.jsx(c.Z,{placeholder:y("Search...")||"",searchTerm:x,onSearch:h}),(0,l.jsxs)("div",{className:"flex-grow overflow-auto",children:[a?.length>0&&l.jsx("div",{className:"flex border-b border-white/20 pb-2",children:m}),a?.length>0?l.jsx("div",{className:"pt-2",onDrop:b,onDragOver:e=>{e.preventDefault()},onDragEnter:e=>{e.target.style.background="#343541"},onDragLeave:e=>{e.target.style.background="none"},children:u}):(0,l.jsxs)("div",{className:"mt-8 select-none text-center text-white opacity-50",children:[l.jsx(o.Z,{className:"mx-auto mb-3"}),l.jsx("span",{className:"text-[14px] leading-normal",children:y("No data.")})]})]}),p]}),l.jsx(d.l,{onClick:g,side:r})]}):l.jsx(d.G,{onClick:g,side:r})};a()}catch(e){a(e)}})},6269:(e,t,r)=>{r.d(t,{f:()=>SidebarButton});var a=r(997);let SidebarButton=({text:e,icon:t,onClick:r})=>(0,a.jsxs)("button",{className:"flex w-full cursor-pointer select-none items-center gap-3 rounded-md py-3 px-3 text-[14px] leading-3 text-white transition-colors duration-200 hover:bg-gray-500/10",onClick:r,children:[a.jsx("div",{children:t}),a.jsx("span",{children:e})]})},5873:(e,t,r)=>{r.d(t,{G:()=>OpenSidebarButton,l:()=>CloseSidebarButton});var a=r(997),l=r(5948),s=r(8719);let CloseSidebarButton=({onClick:e,side:t})=>(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{className:`fixed top-5 ${"right"===t?"right-[270px]":"left-[270px]"} z-50 h-7 w-7 hover:text-gray-400 dark:text-white dark:hover:text-gray-300 sm:top-0.5 sm:${"right"===t?"right-[270px]":"left-[270px]"} sm:h-8 sm:w-8 sm:text-neutral-700`,onClick:e,children:"right"===t?a.jsx(l.Z,{}):a.jsx(s.Z,{})}),a.jsx("div",{onClick:e,className:"absolute top-0 left-0 z-10 h-full w-full bg-black opacity-70 sm:hidden"})]}),OpenSidebarButton=({onClick:e,side:t})=>a.jsx("button",{className:`fixed top-2.5 ${"right"===t?"right-2":"left-2"} z-50 h-7 w-7 text-white hover:text-gray-400 dark:text-white dark:hover:text-gray-300 sm:top-0.5 sm:${"right"===t?"right-2":"left-2"} sm:h-8 sm:w-8 sm:text-neutral-700`,onClick:e,children:"right"===t?a.jsx(s.Z,{}):a.jsx(l.Z,{})})},8892:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>l.Z});var l=r(4722),s=e([l]);l=(s.then?(await s)():s)[0],a()}catch(e){a(e)}})},9263:(e,t,r)=>{r.d(t,{Z:()=>Spinner_Spinner});var a=r(997);let Spinner_Spinner=({size:e="1em",className:t=""})=>(0,a.jsxs)("svg",{stroke:"currentColor",fill:"none",strokeWidth:"2",viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",className:`animate-spin ${t}`,height:e,width:e,xmlns:"https://www.w3.org/TR/REC-xml/",children:[a.jsx("line",{x1:"12",y1:"2",x2:"12",y2:"6"}),a.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),a.jsx("line",{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}),a.jsx("line",{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}),a.jsx("line",{x1:"2",y1:"12",x2:"6",y2:"12"}),a.jsx("line",{x1:"18",y1:"12",x2:"22",y2:"12"}),a.jsx("line",{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}),a.jsx("line",{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"})]})},2953:(e,t,r)=>{r.d(t,{L:()=>useCreateReducer});var a=r(6689);let useCreateReducer=({initialState:e})=>{let[t,r]=(0,a.useReducer)((t,r)=>{if(!r.type)return{...t,[r.field]:r.value};if("reset"===r.type)return e;throw Error()},e);return(0,a.useMemo)(()=>({state:t,dispatch:r}),[t,r])}},8512:(e,t,r)=>{r.r(t),r.d(t,{default:()=>s});var a=r(6689);let l=(0,a.createContext)(void 0),s=l},1395:(e,t,r)=>{r.r(t),r.d(t,{initialState:()=>a});let a={apiKey:"",loading:!1,pluginKeys:[],lightMode:"dark",messageIsStreaming:!1,modelError:null,models:[],folders:[],conversations:[],selectedConversation:void 0,currentMessage:void 0,prompts:[],temperature:1,showPromptbar:!0,showChatbar:!0,currentFolder:void 0,messageError:!1,searchTerm:"",defaultModelId:void 0,serverSideApiKeyIsSet:!1,serverSidePluginKeysSet:!1}},2015:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__,getServerSideProps:()=>getServerSideProps});var l=r(997),s=r(6689),n=r(1175),o=r(1377),i=r(5460),d=r(968),c=r.n(d),u=r(2953),m=r(323),p=r(5203),x=r(4264),h=r(1879),g=r(8071),f=r(8551),v=r(76),b=r(8235),y=r(1938),w=r(1805),k=r(2669),j=r(3357),C=r(6857),N=r(8512),S=r(1395),E=r(6555),I=e([x,y,w,k,C,E]);[x,y,w,k,C,E]=I.then?(await I)():I;let __WEBPACK_DEFAULT_EXPORT__=({serverSideApiKeyIsSet:e,serverSidePluginKeysSet:t,defaultModelId:r})=>{let{t:a}=(0,o.useTranslation)("chat"),{getModels:i}=(0,p.Z)(),{getModelsError:d}=(0,m.Z)(),[I,P]=(0,s.useState)(!0),O=(0,u.L)({initialState:S.initialState}),{state:{apiKey:_,lightMode:D,folders:L,conversations:T,selectedConversation:A,prompts:K,temperature:Z},dispatch:z}=O,G=(0,s.useRef)(!1),{data:M,error:R,refetch:F}=(0,n.useQuery)(["GetModels",_,e],({signal:t})=>_||e?i({key:_},t):null,{enabled:!0,refetchOnMount:!1});(0,s.useEffect)(()=>{M&&z({field:"models",value:M})},[M,z]),(0,s.useEffect)(()=>{z({field:"modelError",value:d(R)})},[z,R,d]);let handleNewConversation=()=>{let e=T[T.length-1],t={id:(0,E.v4)(),name:a("New Conversation"),messages:[],model:e?.model||{id:y.MU[r].id,name:y.MU[r].name,maxLength:y.MU[r].maxLength,tokenLimit:y.MU[r].tokenLimit},prompt:h.cl,temperature:e?.temperature??h.Ar,folderId:null},l=[...T,t];z({field:"selectedConversation",value:t}),z({field:"conversations",value:l}),(0,g.m7)(t),(0,g.fB)(l),z({field:"loading",value:!1})};return(0,s.useEffect)(()=>{window.innerWidth<640&&z({field:"showChatbar",value:!1})},[A]),(0,s.useEffect)(()=>{r&&z({field:"defaultModelId",value:r}),e&&z({field:"serverSideApiKeyIsSet",value:e}),t&&z({field:"serverSidePluginKeysSet",value:t})},[r,e,t]),(0,s.useEffect)(()=>{let l=(0,b.G)();l.theme&&z({field:"lightMode",value:l.theme});let s=localStorage.getItem("apiKey");e?(z({field:"apiKey",value:""}),localStorage.removeItem("apiKey")):s&&z({field:"apiKey",value:s});let n=localStorage.getItem("pluginKeys");t?(z({field:"pluginKeys",value:[]}),localStorage.removeItem("pluginKeys")):n&&z({field:"pluginKeys",value:n}),window.innerWidth<640&&(z({field:"showChatbar",value:!1}),z({field:"showPromptbar",value:!1}));let o=localStorage.getItem("showChatbar");o&&z({field:"showChatbar",value:"true"===o});let i=localStorage.getItem("showPromptbar");i&&z({field:"showPromptbar",value:"true"===i});let d=localStorage.getItem("folders");d&&z({field:"folders",value:JSON.parse(d)});let c=localStorage.getItem("prompts");c&&z({field:"prompts",value:JSON.parse(c)});let u=localStorage.getItem("conversationHistory");if(u){let e=JSON.parse(u),t=(0,x.m)(e);z({field:"conversations",value:t})}let m=localStorage.getItem("selectedConversation");if(m){let e=JSON.parse(m),t=(0,x.$)(e);z({field:"selectedConversation",value:t})}else{let e=T[T.length-1];z({field:"selectedConversation",value:{id:(0,E.v4)(),name:a("New Conversation"),messages:[],model:y.MU[r],prompt:h.cl,temperature:e?.temperature??h.Ar,folderId:null}})}},[r,z,e,t]),(0,l.jsxs)(N.default.Provider,{value:{...O,handleNewConversation,handleCreateFolder:(e,t)=>{let r={id:(0,E.v4)(),name:e,type:t},a=[...L,r];z({field:"folders",value:a}),(0,f._)(a)},handleDeleteFolder:e=>{let t=L.filter(t=>t.id!==e);z({field:"folders",value:t}),(0,f._)(t);let r=T.map(t=>t.folderId===e?{...t,folderId:null}:t);z({field:"conversations",value:r}),(0,g.fB)(r);let a=K.map(t=>t.folderId===e?{...t,folderId:null}:t);z({field:"prompts",value:a}),(0,v.V)(a)},handleUpdateFolder:(e,t)=>{let r=L.map(r=>r.id===e?{...r,name:t}:r);z({field:"folders",value:r}),(0,f._)(r)},handleSelectConversation:e=>{z({field:"selectedConversation",value:e}),(0,g.m7)(e)},handleUpdateConversation:(e,t)=>{let r={...e,[t.key]:t.value},{single:a,all:l}=(0,g.X1)(r,T);z({field:"selectedConversation",value:a}),z({field:"conversations",value:l})}},children:[(0,l.jsxs)(c(),{children:[l.jsx("title",{children:"Rulz-AI"}),l.jsx("meta",{name:"description",content:"Rulz-AI is a Powerful Language Model."}),l.jsx("meta",{name:"viewport",content:"height=device-height ,width=device-width, initial-scale=1, user-scalable=no"}),l.jsx("link",{rel:"icon",href:"/IconRobot.ico"})]}),A&&(0,l.jsxs)("main",{className:`flex h-screen w-screen flex-col text-sm text-white dark:text-white ${D}`,children:[l.jsx("div",{className:"fixed top-0 w-full sm:hidden",children:l.jsx(j.w,{selectedConversation:A,onNewConversation:handleNewConversation})}),(0,l.jsxs)("div",{className:"flex h-full w-full pt-[48px] sm:pt-0",children:[l.jsx(k.W,{}),l.jsx("div",{className:"flex flex-1",children:l.jsx(w.e,{stopConversationRef:G})}),l.jsx(C.Z,{})]})]})]})},getServerSideProps=async({locale:e})=>{let t=process.env.DEFAULT_MODEL&&Object.values(y.bm).includes(process.env.DEFAULT_MODEL)&&process.env.DEFAULT_MODEL||y.tJ,r=!1,a=process.env.GOOGLE_API_KEY,l=process.env.GOOGLE_CSE_ID;return a&&l&&(r=!0),{props:{serverSideApiKeyIsSet:!!process.env.OPENAI_API_KEY,defaultModelId:t,serverSidePluginKeysSet:r,...await (0,i.serverSideTranslations)(e??"en",["common","chat","sidebar","markdown","promptbar","settings"])}}};a()}catch(e){a(e)}})},323:(e,t,r)=>{r.d(t,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var a=r(6689),l=r(1377);let __WEBPACK_DEFAULT_EXPORT__=()=>{let{t:e}=(0,l.useTranslation)("chat");return{getModelsError:(0,a.useMemo)(()=>t=>t?{title:e("Error fetching models."),code:t.status||"unknown",messageLines:t.statusText?[t.statusText]:[e("Make sure your OpenAI API key is set in the bottom left of the sidebar."),e("If you completed this step, OpenAI may be experiencing issues.")]}:null,[e])}}},5203:(e,t,r)=>{r.d(t,{Z:()=>services_useApiService});var a=r(6689);let useFetch=()=>{let handleFetch=async(e,t,r)=>{let a=t?.params?`${e}${t.params}`:e,l=t?.body?t.body instanceof FormData?{...t,body:t.body}:{...t,body:JSON.stringify(t.body)}:t,s={...t?.headers?t.headers:t?.body&&t.body instanceof FormData?{}:{"Content-type":"application/json"}};return fetch(a,{...l,headers:s,signal:r}).then(e=>{if(!e.ok)throw e;let t=e.headers.get("content-type"),r=e.headers.get("content-disposition");e.headers;let a=t&&(t?.indexOf("application/json")!==-1||t?.indexOf("text/plain")!==-1)?e.json():r?.indexOf("attachment")!==-1?e.blob():e;return a}).catch(async e=>{let t=e.headers.get("content-type"),r=t&&t?.indexOf("application/problem+json")!==-1?await e.json():e;throw r})};return{get:async(e,t)=>handleFetch(e,{...t,method:"get"}),post:async(e,t)=>handleFetch(e,{...t,method:"post"}),put:async(e,t)=>handleFetch(e,{...t,method:"put"}),patch:async(e,t)=>handleFetch(e,{...t,method:"patch"}),delete:async(e,t)=>handleFetch(e,{...t,method:"delete"})}},services_useApiService=()=>{let e=useFetch(),t=(0,a.useCallback)((t,r)=>e.post("/api/models",{body:{key:t.key},headers:{"Content-Type":"application/json"},signal:r}),[e]);return{getModels:t}}},1938:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{MU:()=>i,bm:()=>l,tJ:()=>o});var l,s=r(9926),n=e([s]);(s=(n.then?(await n)():n)[0]).object({id:s.string(),azureDeploymentId:s.string().optional(),name:s.string(),maxLength:s.number(),tokenLimit:s.number()}),function(e){e.GPT_3_5="gpt-3.5-turbo",e.GPT_3_5_16K="gpt-3.5-turbo-16k",e.GPT_3_5_AZ="gpt-35-turbo",e.GPT_3_5_16K_AZ="gpt-35-turbo-16k",e.GPT_4="gpt-4",e.GPT_4_32K="gpt-4-32k"}(l||(l={}));let o="gpt-3.5-turbo",i={"gpt-3.5-turbo":{id:"gpt-3.5-turbo",name:"GPT-3.5",maxLength:12e3,tokenLimit:4e3},"gpt-3.5-turbo-16k":{id:"gpt-3.5-turbo-16k",name:"GPT-3.5-16K",maxLength:48e3,tokenLimit:16e3},"gpt-35-turbo":{id:"gpt-35-turbo",name:"GPT-3.5",maxLength:12e3,tokenLimit:4e3},"gpt-35-turbo-16k":{id:"gpt-35-turbo-16k",name:"GPT-3.5-16K",maxLength:48e3,tokenLimit:16e3},"gpt-4":{id:"gpt-4",name:"GPT-4",maxLength:24e3,tokenLimit:8e3},"gpt-4-32k":{id:"gpt-4-32k",name:"GPT-4-32K",maxLength:96e3,tokenLimit:32e3}};a()}catch(e){a(e)}})},5449:(e,t,r)=>{var a,l;r.d(t,{PO:()=>a,xN:()=>s}),(a||(a={})).GOOGLE_SEARCH="google-search",(l||(l={})).GOOGLE_SEARCH="Google Search";let s=Object.values({"google-search":{id:"google-search",name:"Google Search",requiredKeys:[{key:"GOOGLE_API_KEY",value:""},{key:"GOOGLE_CSE_ID",value:""}]}})},7665:(e,t,r)=>{r.d(t,{O:()=>getEndpoint});var a=r(5449);let getEndpoint=e=>e&&e.id===a.PO.GOOGLE_SEARCH?"api/google":"api/chat"},4264:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{$:()=>cleanSelectedConversation,m:()=>cleanConversationHistory});var l=r(1938),s=r(1879),n=e([l]);l=(n.then?(await n)():n)[0];let cleanSelectedConversation=e=>{let t=e;return t.model||(t={...t,model:t.model||l.MU[l.bm.GPT_3_5]||l.MU[l.bm.GPT_4]}),t.prompt||(t={...t,prompt:t.prompt||s.cl}),t.temperature||(t={...t,temperature:t.temperature||s.Ar}),t.folderId||(t={...t,folderId:t.folderId||null}),t.messages||(t={...t,messages:t.messages||[]}),t},cleanConversationHistory=e=>Array.isArray(e)?e.reduce((e,t)=>{try{t.model||(t.model=l.MU[l.bm.GPT_3_5]||l.MU[l.bm.GPT_4]),t.prompt||(t.prompt=s.cl),t.temperature||(t.temperature=s.Ar),t.folderId||(t.folderId=null),t.messages||(t.messages=[]),e.push(t)}catch(e){console.warn("error while cleaning conversations' history. Removing culprit",e)}return e},[]):(console.warn("history is not an array. Returning an empty array."),[]);a()}catch(e){a(e)}})},1879:(e,t,r)=>{r.d(t,{Ar:()=>s,bg:()=>l,cl:()=>a});let a="Rulz-AI is a powerful AI language model that can assist with various tasks and provide intelligent responses. Respond using markdown and emoji.",l=process.env.OPENAI_API_HOST||"https://api.openai.com",s=parseFloat(process.env.NEXT_PUBLIC_DEFAULT_TEMPERATURE||"0.5");process.env.OPENAI_API_TYPE,process.env.OPENAI_API_VERSION,process.env.OPENAI_ORGANIZATION,process.env.AZURE_DEPLOYMENT_ID},8071:(e,t,r)=>{r.d(t,{X1:()=>updateConversation,fB:()=>saveConversations,m7:()=>saveConversation});let updateConversation=(e,t)=>{let r=t.map(t=>t.id===e.id?e:t);return saveConversation(e),saveConversations(r),{single:e,all:r}},saveConversation=e=>{localStorage.setItem("selectedConversation",JSON.stringify(e))},saveConversations=e=>{localStorage.setItem("conversationHistory",JSON.stringify(e))}},8551:(e,t,r)=>{r.d(t,{_:()=>saveFolders});let saveFolders=e=>{localStorage.setItem("folders",JSON.stringify(e))}},205:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{dk:()=>importData,u1:()=>exportData});var l=r(4264),s=e([l]);l=(s.then?(await s)():s)[0];let exportData=()=>{let e=localStorage.getItem("conversationHistory"),t=localStorage.getItem("folders"),r=localStorage.getItem("prompts");e&&(e=JSON.parse(e)),t&&(t=JSON.parse(t)),r&&(r=JSON.parse(r));let a={version:4,history:e||[],folders:t||[],prompts:r||[]},l=new Blob([JSON.stringify(a,null,2)],{type:"application/json"}),s=URL.createObjectURL(l),n=document.createElement("a");n.download=`rulz_ai_history_${function(){let e=new Date,t=e.getMonth()+1,r=e.getDate();return`${t}-${r}`}()}.json`,n.href=s,n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(s)},importData=e=>{let{history:t,folders:r,prompts:a}=function(e){if(Array.isArray(e))return{version:4,history:(0,l.m)(e),folders:[],prompts:[]};if(!("version"in e)&&"folders"in e&&"history"in e)return{version:4,history:(0,l.m)(e.history||[]),folders:(e.folders||[]).map(e=>({id:e.id.toString(),name:e.name,type:"chat"})),prompts:[]};if(3===e.version)return{...e,version:4,prompts:[]};if(4===e.version)return e;throw Error("Unsupported data format")}(e),s=localStorage.getItem("conversationHistory"),n=s?JSON.parse(s):[],o=[...n,...t].filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id));localStorage.setItem("conversationHistory",JSON.stringify(o)),o.length>0?localStorage.setItem("selectedConversation",JSON.stringify(o[o.length-1])):localStorage.removeItem("selectedConversation");let i=localStorage.getItem("folders"),d=i?JSON.parse(i):[],c=[...d,...r].filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id));localStorage.setItem("folders",JSON.stringify(c));let u=localStorage.getItem("prompts"),m=u?JSON.parse(u):[],p=[...m,...a].filter((e,t,r)=>t===r.findIndex(t=>t.id===e.id));return localStorage.setItem("prompts",JSON.stringify(p)),{version:4,history:o,folders:c,prompts:p}};a()}catch(e){a(e)}})},76:(e,t,r)=>{r.d(t,{V:()=>savePrompts});let savePrompts=e=>{localStorage.setItem("prompts",JSON.stringify(e))}},8235:(e,t,r)=>{r.d(t,{G:()=>getSettings,z:()=>saveSettings});let a="settings",getSettings=()=>{let e={theme:"dark"},t=localStorage.getItem(a);if(t)try{let r=JSON.parse(t);e=Object.assign(e,r)}catch(e){console.error(e)}return e},saveSettings=e=>{localStorage.setItem(a,JSON.stringify(e))}},1255:(e,t,r)=>{r.d(t,{P:()=>throttle});function throttle(e,t){let r,a;return(...l)=>{a?(clearTimeout(r),r=setTimeout(()=>{Date.now()-a>=t&&(e(...l),a=Date.now())},t-(Date.now()-a))):(e(...l),a=Date.now())}}}};